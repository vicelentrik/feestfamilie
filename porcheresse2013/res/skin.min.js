var VER="5.2.4",DEBUG=!1,UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",LOCALSTORAGE=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}(),VEND=function(e){return e.indexOf("Trident")>0?"ms":e.indexOf("AppleWebKit")>0?"webkit":e.indexOf("Gecko")>0?"moz":e.indexOf("Presto")>0?"o":e.indexOf("Blink")>0?"webkit":""}(navigator.userAgent);String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var e=this+"",t=e.length;if(t){var n=String.wsp,o=0;for(--t;t>=0&&n[e.charCodeAt(t)];)--t;for(++t;t>o&&n[e.charCodeAt(o)];)++o;e=e.substring(o,t)}return e},String.prototype.trunc=function(e){var t=this+"";if(t.length<=e)return t.toString();var n=t.substring(0,e-1),o=n.lastIndexOf(" ");return(o>6&&n.length-o<20?n.substring(0,o):n)+"..."},String.prototype.startsWith=function(e){return 0===(this+"").indexOf(e)},String.prototype.endsWith=function(e){return(this+"").substring(this.length-e.length)===e},String.prototype.getExt=function(){var e=this+"",t=e.lastIndexOf(".");return 0>=t||t>=e.length-1?"":e.substring(t+1).toLowerCase()},String.prototype.hasExt=function(e){var t=this+"",n=t.lastIndexOf(".");return n>=0?(t=t.substring(n+1).toLowerCase(),(e+",").indexOf(t+",")>=0):!1},String.prototype.replaceExt=function(e){var t=this+"",n=t.lastIndexOf(".");return 0>=n?t:t.substring(0,n+1)+e},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var e=(this+"").split("#")[0];return e.substring(0,e.lastIndexOf("/")+1)},String.prototype.getFile=function(){var e=(this+"").split("#")[0];return e.substring(e.lastIndexOf("/")+1)},String.prototype.getRelpath=function(e){var t=this+"",n=t.lastIndexOf("#");for(-1===n?n=t.length-1:n--;n>=0&&("/"!==t[n]||0!==e--);n--);return t.substring(n+1)},String.prototype.fixUrl=function(){for(var e,t,n=this+"";(e=n.indexOf("../"))>0;){if(1===e||-1===(t=n.lastIndexOf("/",e-2)))return n.substring(e+3);n=n.substring(0,t)+n.substring(e+2)}return n},String.prototype.fullUrl=function(){var e=this+"";return e.match(/^(http|ftp|file)/)||(e=window.location.href.getDir()+e),e.fixUrl()},String.prototype.cleanupHTML=function(){for(var e=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],t=this+"",n=e.length-1;n>=0;n--)t=t.replace(e[n][0],e[n][1]);return t},String.prototype.stripHTML=function(){return(this+"").replace(/<\/?[^>]+>/gi,"")},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(e,t){return(this.length?this+(t||" &middot; "):"")+e},String.prototype.rgb2hex=function(){var e=this+"";if("#"===e.charAt(0)||"transparent"===e)return e;var t,n=e.match(/\d+/g),o="";if(n){for(var a=0;a<n.length&&3>a;a++)t=parseInt(n[a],10).toString(16),o+=(t.length<2?"0":"")+t;return"#"+o}return"transparent"},String.prototype.template=function(e){if(!e||!this)return this;for(var t=this+"",n=0;n<e.length;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gi"),e[n]);return t},Math.minMax=function(e,t,n){return t=isNaN(t)?parseFloat(t):t,e>t?e:t>n?n:t};var getCoords=function(e){return e.touches&&e.touches.length>0?{x:Math.round(e.touches[0].clientX),y:Math.round(e.touches[0].clientY)}:null!==e.clientX?{x:Math.round(e.clientX),y:Math.round(e.clientY)}:null},noAction=function(e){return e.preventDefault(),!1},fixFbComments=function(e){var t=window.location.href;-1===t.indexOf("?fb_comment_id=")?(t=t.split("#")[0],e&&"/"===t[t.length-1]&&(t+=e)):t=t.split("?")[0],document.getElementById("fb-comments").setAttribute("data-href",t)},initMobile=function(){if(!(!/Mobile/.test(navigator.userAgent)||screen.width>980||screen.height>980||window.innerWidth!==document.documentElement.clientWidth&&window.innerWidth-1!==document.documentElement.clientWidth)){var e=function(){return window.hasOwnProperty("pageYOffset")&&window.scrollTo(0,window.pageYOffset+1),!0};setTimeout(function(){e()},1e3),$(window).on("orientationchange",e)}},log=function(){};!function(e){var t,n,o=!1,a=1;log=function(i){DEBUG&&!o&&(t||(t=e('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){o=!0},function(){o=!1}).appendTo("body")),i===n?t.children(":first").empty().html(n+" ("+ ++a+")"):(e('<div style="height:2em;overflow:hidden;">'+i+"</div>").prependTo(t),n=i,a=1))},e.fn.logEvents=function(t){if(DEBUG){var n=t||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){e(this).on(n,function(e){return typeof e===UNDEF?log("Undefined event"):e.target?"log"!==e.target.id&&log(e.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+(e.target.nodeName?e.target.nodeName.toLowerCase():"???")+"</b>"+(e.target.id?":"+e.target.id:"")+"</span>"+(e.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+e.relatedTarget.nodeName.toLowerCase()+"</b>"+(e.relatedTarget.id?":"+e.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},e.fn.logCss=function(t,n,o){if(DEBUG){o=o||20,n=n||2e3;var a=new Date;return this.each(function(){var i=e(this),r=function(e){var t=new Date-a;log(t+"&nbsp;::&nbsp;"+e+" = "+i.css(e)),t>n&&clearInterval(s)},s=setInterval(function(){if(e.isArray(t))for(var n=0;n<t.length;n++)r(t[n]);else r(t)},o)})}}}(jQuery);var translate=function(e,t){if(e=e.trim(),typeof Texts!==UNDEF&&Texts.hasOwnProperty(e))return Texts[e];if(typeof t!==UNDEF)return DEBUG&&console&&console.log("Using default translation: "+e+"="+t),t;DEBUG&&console&&console.log("Missing translation: "+e);var n=e.replace(/([A-Z])/g," $1").toLowerCase();return n[0]=n.charAt(0).toUpperCase(),n},getKeys=function(e,t){var n,o={},a=e.split(","),i=a.length;for(n=0;i>n;n++)o[a[n]]=translate(a[n],t[a]);return o},getTranslations=function(e){var t,n={};for(t in e)n[t]="object"==typeof e[t]?getTranslations(e[t]):translate(t,e[t]);return n},getRelativeDate=function(e){if(!e)return translate("today");if(1===e)return translate("yesterday");var t,n;return e>=730?(t=translate("yearsAgo"),n=Math.floor(e/365)):e>=60?(t=translate("monthsAgo"),n=Math.floor(e/30.5)):(t=translate("daysAgo"),n=e),t.replace("{0}",n)};!function(e,t){/Trident/.test(navigator.userAgent)?/IEMobile/.test(navigator.userAgent)?(window.navigator.msPointerEnabled?(TOUCH_START="MSPointerDown",TOUCH_MOVE="MSPointerMove",TOUCH_END="MSPointerUp"):(TOUCH_START="pointerDown",TOUCH_MOVE="pointerMove",TOUCH_END="pointerUp"),t.touchMode=!0):t.touchMode=!1:(TOUCH_START="touchstart",TOUCH_MOVE="touchmove",TOUCH_END="touchend",t.touchMode=/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent):"ontouchstart"in window);var n="moz"===VEND?"transform":"-"+VEND+"-transform";e.fn.translate=function(t,o,a){return this.each(function(){a&&e(this).addClass(a).data("tr_cls",a),this.style[n]="translate("+(t||0)+"px,"+(o||0)+"px)",e(this).data({tr_x:t,tr_y:o})})},e.fn.translateToPos=function(){return this.each(function(){var t=e(this),o=t.data("tr_x")||0,a=t.data("tr_y")||0;if(o||a){var i=t.position(),r=t.data("tr_cls");r&&t.removeClass(r),this.style[n]="translate(0,0)",t.removeData("tr_x tr_y").css({left:i.left,top:i.top})}})}}(jQuery,document),function(){function e(){t&&(a(e),jQuery.fx.tick())}for(var t,n=0,o=["webkit","moz"],a=window.requestAnimationFrame,i=window.cancelAnimationFrame;n<o.length&&!a;n++)a=window[o[n]+"RequestAnimationFrame"],i=i||window[o[n]+"CancelAnimationFrame"]||window[o[n]+"CancelRequestAnimationFrame"];a?(window.requestAnimationFrame=a,window.cancelAnimationFrame=i,jQuery.fx.timer=function(n){n()&&jQuery.timers.push(n)&&!t&&(t=!0,e())},jQuery.fx.stop=function(){t=!1}):(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),o=Math.max(0,16-(t-n)),a=window.setTimeout(function(){e(t+o)},o);return n=t+o,a},window.cancelAnimationFrame=function(e){clearTimeout(e)})}(jQuery),function(e){var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=t.length;n;)e.event.fixHooks[t[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],o,!1);else this.onmousewheel=o},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],o,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});var o=function(t){var n=t||window.event,o=[].slice.call(arguments,1),a=0,i=0,r=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta?a=n.wheelDelta/120:n.detail&&(a=-n.detail/3),r=a,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(r=0,i=-1*a),void 0!==n.wheelDeltaY&&(r=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(i=-1*n.wheelDeltaX/120),o.unshift(t,a,i,r),(e.event.dispatch||e.event.handle).apply(this,o)}}(jQuery),function(e){e.event.special.dbltap={setup:function(){e(this).on("touchend.dbltap",e.event.special.dbltap.handler)},teardown:function(){e(this).off("touchend.dbltap")},handler:function(t){var n=[].slice.call(arguments,1),o=e(t.target),a=(new Date).getTime(),i=a-(o.data("lastTouch")||0);return i>5&&300>i?(t.preventDefault(),o.data("lastTouch",0),t=e.e.fix(t||window.event),t.type="dbltap",n.unshift(t),(e.e.dispatch||e.e.handle).apply(this,n)):(o.data("lastTouch",a),!0)}}}(jQuery),function(e){e.cookie=function(t,n,o){var a,i,r="; ",s=function(e){return/^(true|yes)$/.test(e)?!0:/^(false|no)$/.test(e)?!1:/^([\d.]+)$/.test(e)?parseFloat(e):e};if(arguments.length>1)return i=new Date,null===n?LOCALSTORAGE?localStorage.removeItem(t):document.cookie=encodeURIComponent(t)+"="+"; expires="+i.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof n)&&(i.setTime(i.getTime()+1e3*("number"!=typeof o?3600:o)),LOCALSTORAGE?localStorage.setItem(t,String(n)+r+String(i.getTime())):document.cookie=encodeURIComponent(t)+"="+String(n)+"; expires="+i.toGMTString()+"; path=/"),n;if(t)if(LOCALSTORAGE){if(a=localStorage.getItem(t)){if(a=a.split(r),!(e.isArray(a)&&a.length>1))return s(a);if(i=new Date,i.getTime()<parseInt(a[1],10))return s(a[0]);localStorage.removeItem(t)}}else{var l;a=document.cookie.split(";"),t+="=";for(var d=0;d<a.length;d++)l=a[d].trim(),0===l.indexOf(t)&&(l=l.substring(t.length),s(l))}return null}}(jQuery),function(e){!function(){function t(t){function n(e){return e===!0?function(e){return e}:"string"==typeof e&&(e=a(e.split("")))||"function"==typeof e?function(t){return e(encodeURIComponent(t))}:encodeURIComponent}function a(t){var n=new RegExp(e.map(t,encodeURIComponent).join("|"),"ig");return function(e){return e.replace(n,decodeURIComponent)}}t=e.extend({unescape:!1},t||{}),o.encoder=n(t.unescape)}var n=-1===navigator.userAgent.indexOf("Firefox"),o={put:function(e,t){(t||window).location.hash=this.encoder(e)},get:function(e){var t=(e||window).location.hash.replace(/^#/,"");try{return n?decodeURIComponent(t):t}catch(o){return t}},encoder:encodeURIComponent},a={};a.base={callback:void 0,type:void 0,check:function(){},load:function(){},init:function(e,n){t(n),i.callback=e,i._options=n,i._init()},_init:function(){},_options:{}},a.timer={_appState:void 0,_init:function(){var e=o.get();i._appState=e,i.callback(e),setInterval(i.check,100)},check:function(){var e=o.get();e!==i._appState&&(i._appState=e,i.callback(e))},load:function(e){e!==i._appState&&(o.put(e),i._appState=e,i.callback(e))}},a.hashchangeEvent={_init:function(){i.callback(o.get()),e(window).on("hashchange",i.check)},check:function(){i.callback(o.get())},load:function(e){o.put(e)}};var i=e.extend({},a.base);i.type="onhashchange"in window?"hashchangeEvent":"timer",e.extend(i,a[i.type]),e.history=i}()}(jQuery),function(e){e.fn.addModal=function(t,n,o){var a=e(this);if("string"==typeof t&&(t=e(t)),t instanceof e&&t.length){e.isArray(n)||(o=n,n=null),o=e.extend({},e.fn.addModal.defaults,o),o.savePosition=o.savePosition&&typeof o.uid!==UNDEF;var i=getTranslations(e.fn.addModal.text);o.defaultButton&&(o.defaultButton=translate(o.defaultButton,"OK"));var r,s,l,d,c,u,p,h,f,m={w:"_m_window",p:"_m_panel",h:"_m_head",c:"_m_cont",ci:"_m_cont_i",x:"close",r:"resize"},g=0;o.uid&&e("#"+o.uid).parents("."+m.w).remove(),r=e("<div>",{"class":m.w,role:"modal"}).css({opacity:0}).appendTo(a),a.css({position:"relative"});var v=function(){p=a.width(),h=a.height()};v(),e(window).on("resize",v),o.darkenBackground&&r.addClass("darken"),s=e("<div>",{id:o.uid||"_mod_"+Math.floor(1e4*Math.random()),"class":m.p+" "+o.type}).css({width:o.width}).appendTo(r),l=e("<header>",{"class":m.h}).appendTo(s),l.append(e("<h5>",{text:o.title||("error"===o.type||"warning"===o.type?i[o.type]:"")})),("error"===o.type||"warning"===o.type)&&l.append(e("<span>",{"class":o.type,text:"!"}));var w=function(){return d.trigger("removeTooltip"),f=clearTimeout(f),r.animate({opacity:0},o.speed,function(){r.remove()}),!1};r.on("destroy",w),o.blocking&&o.closeOnClickOut&&r.on("click",function(t){return e(t.target).hasClass(m.w)?w(t):void 0}),d=e("<a>",{href:NOLINK,"class":m.x,html:"&times;"}).appendTo(l),document.touchMode?d[0].addEventListener(TOUCH_END,w):(d.on("click",w),d.addTooltip(i.closeWindow));var b=function(t){t.preventDefault();var n=s.position().left,a=s.position().top,i=getCoords(t),r=p-s.width()-o.pad,d=h-s.height()-o.pad,c=l.css("cursor");l.css({cursor:"move"});var u=function(e){e.preventDefault();var t=getCoords(e);return s.css({left:Math.minMax(o.pad,n+t.x-i.x,r),top:Math.minMax(o.pad,a+t.y-i.y,d)}),!1},f=function(t){return t.preventDefault(),e(document).off({mousemove:u,mouseup:f}),l.css("cursor",c),o.savePosition&&N(),!1};return document.touchMode?(this.addEventListener(TOUCH_END,f),this.addEventListener(TOUCH_MOVE,u)):e(document).on({mousemove:u,mouseup:f}),!1};if(o.movable&&(document.touchMode?l[0].addEventListener(TOUCH_START,b):l.on("mousedown",b)),c=e("<div>",{"class":m.c}).appendTo(s),u=e("<div>",{"class":m.ci}).append(t).appendTo(c),!n&&o.defaultButton&&(n=[{t:o.defaultButton,h:w}]),n){var y,T,k,x=e("<div>",{"class":"buttons"}).appendTo(u),S=function(t){k.each(function(n){e(this).toggleClass("active",n===t)})},I=function(){e(document).off("keydown",M),w()},M=function(t){if(document.activeElement&&"input"===document.activeElement.nodeName||e.isFunction(o.enableKeyboard)&&!o.enableKeyboard())return!0;var n=t?t.keyCode:window.event.keyCode;if(27===n)return I(),!1;if(x){var a=x.find("a.active"),i=k.index(a);switch(n){case 13:case 10:e.isFunction(a[0].handler)&&a[0].handler.call(r)!==!1&&I();break;case 39:S((i+1)%k.length);break;case 37:S(i?i-1:k.length-1);break;default:return!0}return!1}return!0},O=function(t){t.preventDefault();var n=t.target;return e.isFunction(n.handler)&&n.handler.call(r,s)!==!1&&I(),!1};for(y=0;y<n.length;y++)y&&x.append(" "),T=e("<a>",{href:NOLINK,html:n[y].t}).on("click",O).appendTo(x),e.isFunction(n[y].h)&&(T[0].handler=n[y].h);k=x.children("a"),k.last().addClass("active"),(e.isFunction(o.enableKeyboard)||o.enableKeyboard)&&e(document).on("keydown",M)}if(o.resizable){var C=function(e){e.preventDefault();var t=[s.position().left,s.position().top,s.width(),s.height()],n=[o.pad,o.pad,p-2*o.pad,h-2*o.pad],a=function(e){s.css({left:Math.minMax(o.gap,e[0],p-e[2]-o.gap),top:Math.minMax(o.gap,e[1],h-e[3]-o.gap),width:e[2],height:e[3]}),u.css({height:e[3]-g})};return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]?a(s.data("wpos")):(a(n),s.data("wpos",t)),o.savePosition&&N(),!1};l.on(document.touchMode?"dbltap":"dblclick",C);var D=e("<a>",{"class":m.r}).appendTo(s),F=function(t){t.preventDefault();var n=s.width(),a=s.height(),i=getCoords(t),l=r.width(),d=h-o.pad-s.position().top-g,l=p-o.pad-s.position().left,c=function(e){e.preventDefault();var t=getCoords(e),o=Math.min(Math.max(a+t.y-i.y-g,20),d);return s.css({width:Math.min(Math.max(n+t.x-i.x,60),l),height:o+g}),u.css({height:o}),!1},f=function(t){return t.preventDefault(),e(document).off({mousemove:c,mouseup:f}),o.savePosition&&N(),!1};return document.touchMode?(this.addEventListener(TOUCH_MOVE,c),this.addEventListener(TOUCH_END,f)):e(document).on({mousemove:c,mouseup:f}),!1};document.touchMode?D[0].addEventListener(TOUCH_START,F):D.on("mousedown",F)}var E=function(){var e=s.width(),t=s.height();g=t-u.height(),e&&t&&p&&h&&(e+2*o.pad>p&&s.css({width:e=p-2*o.pad}),t+2*o.pad>h&&(s.css({height:t=h-2*o.pad}),u.css({height:h-2*o.pad-g})),s.css({left:Math.max(Math.round((p-e)*o.pos[0]/2),o.pad),top:Math.max(Math.round((h-t)*o.pos[1]/2),o.pad)}))},L=function(e){var t,n=Math.minMax(o.pad,parseInt(e[0],10),p-o.pad-60),a=Math.minMax(o.pad,parseInt(e[1],10),h-o.pad-60),i=Math.minMax(120,parseInt(e[2],10),p-n-o.pad);(isNaN(n)||isNaN(a)||isNaN(i))&&E(),g=l.outerHeight()+parseInt(c.css("padding-top"),10)+parseInt(c.css("padding-bottom"),10)+parseInt(u.css("padding-top"),10)+parseInt(u.css("padding-bottom"),10)+parseInt(c.css("border-top-width"),10),s.css({position:"absolute",left:n,top:a,width:i}),s.height()>(t=h-a-o.pad)&&(s.css({height:t}),u.css({height:t-g}))},N=function(){e.cookie("modalPosition"+o.uid,s.position().left+","+s.position().top+","+s.width()+","+s.height())},P=function(t){r.css({opacity:0}).show(),setTimeout(function(){t&&(t=t.split(","))&&e.isArray(t)&&t.length>3?L(t):E(),o.blocking||r.css({width:0,height:0,right:"auto",bottom:"auto",overflow:"visible"}),r.animate({opacity:1},o.speed),o.savePosition&&N(),o.autoFade&&(f=setTimeout(w,o.autoFade)),o.scrollIntoView&&setTimeout(function(){var e=u.children(":not(.buttons)").find(".active:first");e&&e.length&&u.scrollTop(Math.max(Math.floor(e.position().top)-50,0))},200)},40)};return P(o.savePosition?e.cookie("modalPosition"+o.uid):null),this}},e.fn.addModal.defaults={speed:300,autoFade:0,width:400,resizable:!1,movable:!0,blocking:!0,enableKeyboard:!0,closeOnClickOut:!0,darkenBackground:!0,savePosition:!1,scrollIntoView:!1,defaultButton:"okButton",pad:6,pos:[1,1],type:"normal"},e.fn.addModal.text={closeWindow:"Close window",error:"error",warning:"warning"}}(jQuery),function(e){e.fn.addTooltip=function(t,n){t&&"string"!=typeof t&&!t.jquery&&(n=t,t=null),id={tooltip:"tooltip"},n=e.extend({},e.fn.addTooltip.defaults,n),e.fn.hideAllTooltips=function(){e("."+n.className).hide()};var o=function(t,o){var a;if(o)if("string"==typeof o)a=e("<div>",{html:o}).appendTo("body");else{if(!o.jquery)return null;a=e.contains(document.body,o[0])?o:o.appendTo("body")}else{if((o=t.data(id.tooltip))?("."===o.charAt(0)?o=t.find(o):"#"===o.charAt(0)&&(o=e(o)),o.jquery&&o.removeClass("hidden")):(o=t.attr("title"),t.removeAttr("title")),!o||!o.length)return null;a=e("<div>",{html:o}).appendTo("body")}return a.addClass(n.className).hide(),a};return this.each(function(){var a,i,r,s,l=e(this),d=!1,c=!1,u=function(){r=clearTimeout(r),d=!0,a.finish().show()},p=function(){c||(clearTimeout(r),d=!1,r=setTimeout(m,100))},h=function(){i=clearTimeout(i),clearTimeout(r),d=!1,r=setTimeout(m,100)},f=function(){return h(),!0},m=function(){!d&&a&&a.stop(!0,!1).fadeOut(200,function(){a.hide()})},g=function(){clearTimeout(r),r=setTimeout(m,n.stay)},v=function(){return(a=o(l,t))?(document.touchMode||(a.on("mouseover",u),a.on("mouseout",p)),a.find("input, textarea").on({focus:function(){c=!0,u()},blur:function(){c=!1}}),!0):!1},w=function(){var e=l.offset();e.top===s.top&&e.left===s.left&&a.fadeIn(300).alignTo(l,{pos:n.pos})},b=function(){if(a)a.stop(!0,!1),r=clearTimeout(r);else if(!v())return;s=l.offset(),clearTimeout(i),i=setTimeout(w,n.delay),document.touchMode?g():d=!0},y=function(e){if(e.preventDefault(),!a||a.is(":hidden"))b();else if(d=!1,h(),"A"===l[0].nodeName){var t=l.attr("href");t&&!t.startsWith("javascript:")?window.location.href=t:l.trigger("click")}return!1},T=function(e){e.preventDefault(),e.stopPropagation()};l.on("removeTooltip",h),document.touchMode?(this.addEventListener(TOUCH_START,y),this.addEventListener(TOUCH_END,T),this.addEventListener("click",T)):l.on({"focus mouseenter":b,"blur mouseleave":h,click:f})})},e.fn.addTooltip.defaults={delay:50,className:"hint",stay:2e3,pos:[1,2,1,0]}}(jQuery),function(e){e.fn.loadImages=function(t){return t=e.extend({},e.fn.loadImages.defaults,t),this.each(function(){var n=e(this),o=n.find(t.selector).eq(0)||n.children().eq(0);if(o.length&&n.is(":visible")&&o.is(":visible")){var a=o.find("img."+t.loadClass);if(a.length){var i,r,s,l,d,c,u="absolute"===o.css("position"),p=-(typeof t.left!==UNDEF?t.left:o.position().left-(u?0:n.scrollLeft()))-t.d,h=-(typeof t.top!==UNDEF?t.top:o.position().top-(u?0:n.scrollTop()))-t.d,f=o.offset().left,m=o.offset().top,g=(u?n.width():e(window).width())+2*t.d,v=(u?n.height():e(window).height())+2*t.d,w=0;a.each(function(){r=e(this),i=r.parent(),(d=r.data("src"))&&(l=i.offset().left-f,s=i.offset().top-m,h+v>s&&p+g>l&&s+i.outerHeight()>h&&l+i.outerWidth()>p&&(c=e("<span>",{"class":t.wait}).appendTo(i),r.hide().on("load",function(){e(this).fadeIn().siblings("."+t.wait).remove()}).attr({src:d}).removeClass(t.loadClass),w++))})}}})},e.fn.loadImages.defaults={selector:".load",loadClass:"toload",wait:"wait",d:80}}(jQuery),function(e){e.fn.addScroll=function(t){return t=e.extend({},e.fn.addScroll.defaults,t),this.each(function(){var n,o,a,i,r,s,l,d,c,u,p,h,f,m,g,v,w=e(this),b=w.parent(),y=0;w.css({position:"absolute",width:b.width-20}),b.css({overflow:"hidden"}),"absolute"!==b.css("position")&&b.css({position:"relative"}),o=e("<div>",{"class":t.upbtn}).appendTo(b),a=e("<div>",{"class":t.dnbtn}).appendTo(b),i=e("<div>",{"class":t.scbar}).appendTo(b),r=e("<div>").appendTo(i),s=o.add(a).add(i),s.hide();var T=function(){l=w.height(),d=b.height()},k=function(){return w.position().top},x=function(e){return Math.round((i.height()-6)*-(null==e?k():e)/l)+3},S=function(){return Math.max(Math.round((i.height()-6)*d/l),t.dragMinSize)},I=function(e){null==e&&(e=k()),o.css({opacity:e?1:t.disabledOpacity}),a.css({opacity:e===d-l?t.disabledOpacity:1})},M=function(){return!1},O=function(){var e=l,t=d;T(),b.scrollTop()&&(w.css({top:-b.scrollTop()}),b.scrollTop(0)),(e!==l||t!==d)&&(d>=l?(w.css({top:0}).off("selectstart",M),s.hide()):(w.position().top<d-l&&w.css({top:d-l}),r.css({top:x(),height:S()}),w.on("selectstart",M),s.show(),I()),b.loadImages())},C=function(){w.css({top:Math.minMax(d-l,-Math.round((r.position().top-3)*l/(i.height()-6)),0)}),I(),b.loadImages()},D=function(e){clearInterval(c),d>=l||(e=Math.minMax(d-l,Math.round(e),0),r.stop(!0,!1).animate({top:x(e)},t.speed,t.effect),w.stop(!0,!1).animate({top:e},t.speed,t.effect,function(){I(e)}),b.loadImages({top:e}))};o.on("click",function(){return D(k()+d),!1}),a.on("click",function(){return D(k()-d),!1}),i.on("click",function(e){return e.pageY<r.offset().top?D(k()+d):e.pageY>r.offset().top+r.height()&&D(k()-d),!1}),t.enableMouseWheel&&w.on("mousewheel",function(e,n){return n&&(clearTimeout(c),r.stop(!0,!0),w.stop(!0,!0),D(k()+t.wheelIncr*(0>n?-1:1))),!1});var F=function(e){return e.preventDefault(),r.css({top:Math.minMax(2,Math.round(e.pageY-r.data("my")),i.height()-r.height()-2)}),C(),!1},E=function(t){return t.preventDefault(),e(document).off("mousemove",F).off("mouseup",E),!1};r.on("mousedown",function(t){return t.preventDefault(),e(this).data("my",Math.round(t.pageY)-e(this).position().top),e(document).on({mousemove:F,mouseup:E}),!1});var L=function(e){return y=e.touches&&e.touches.length>0?e.touches[0].clientY:e.clientY?e.clientY:y},N=function(){g+=Math.round(m/20);var e=f+g;return e>0||v>e?(clearInterval(c),b.loadImages(),void 0):(w.css({top:e}),r.css({top:x(),height:S()}),m*=.8,Math.abs(m)<10&&(m=0,clearInterval(c),b.loadImages()),void 0)},P=function(e){if(e.preventDefault(),p){var t=L(e)-p;t&&(w.data("dragOn",!0),w.css({top:Math.minMax(v,u+t,0)}),r.css({top:x(),height:S()}))}else p=L(e);return!1},_=function(t){t.preventDefault(),f=k();var n=L(t)-p,o=(new Date).getTime()-h;return m=1e3*n/o,c=setInterval(N,50),document.touchMode?(this.removeEventListener(TOUCH_MOVE,P),this.removeEventListener(TOUCH_END,_)):e(document).off({mousemove:P,mouseup:_}),setTimeout(function(){w.data("dragOn",!1)},20),b.loadImages(),Math.abs(n)<4&&300>o},U=function(n){var o=n.target.nodeName;return"INPUT"===o||"TEXTAREA"===o||"BUTTON"===o||"SELECT"===o?!0:(n.preventDefault(),w.data("dragOn")?(_(n),!0):n.target.scrollHeight-1>n.target.clientHeight?!0:t.dontDrag&&(e(n.target).is(t.dontDrag).length||e(n.target).parents(t.dontDrag).length)?!0:d>=l||("touchstart"===n.type||"touchmove"===n.type)&&(!n.touches||n.touches.length>1||w.is(":animated"))?!0:(r.stop(!0,!0),w.stop(!0,!0),clearInterval(c),u=k(),p=L(n),h=(new Date).getTime(),g=0,v=d-l,document.touchMode?(e(n.target).closest("a").focus(),this.addEventListener(TOUCH_MOVE,P),this.addEventListener(TOUCH_END,_),!0):(e(document).on({mousemove:P,mouseup:_}),!1)))};document.touchMode?w[0].addEventListener(TOUCH_START,U):w.on("mousedown",U),e(window).on("resize",function(){clearTimeout(n),n=setTimeout(O,50)}),n=setTimeout(O,10),t.refresh&&setInterval(function(){e("[role=gallery]").is(":visible")||O()},t.refresh),w.attr("role","scroll").data("dragOn",!1).on("adjust",O),s.on("selectstart",M);var A=function(){if(!w.data("dragOn")){var t=e(this).parent()===w?e(this):e(this).parent(),n=t.position().top,o=t.outerHeight(!0),a=w.position().top,i=b.height();if(!(i>w.height())){if(n+o>i-a)a=Math.max(i-o-n,i-w.height());else{if(!(-a>n))return;a=-n}D(a)}}};t.focusActive&&w.find("a").on("setactive",A);var j=function(e){return w.data("dragOn")?(e.preventDefault(),!1):!0};w.find("a").on("click",j),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&e(document).on("keydown",function(n){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard())return!0;var o=n?n.keyCode:window.event.keyCode;switch(o){case 33:return n.preventDefault(),D(k()+d),!1;case 34:return n.preventDefault(),D(k()-d),!1}return!0})})},e.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:300,effect:"swing",disabledOpacity:.3,wheelIncr:50,enableKeyboard:!0,enableMouseWheel:!0,focusActive:!0,refresh:0}}(jQuery),function(e){e.extend(jQuery.easing,{easeOutBack:function(e,t,n,o,a,i){return null==i&&(i=1.70158),o*((t=t/a-1)*t*((i+1)*t+i)+1)+n}}),e.fn.scrollThumbs=function(t){return t=e.extend({},e.fn.scrollThumbs.defaults,t),this.each(function(){var n,o,a,i,r,s,l,d,c,u=e(this),p=u.parent(),h=0,f=e("<div>",{"class":t.scleft}).insertAfter(p),m=e("<div>",{"class":t.scright}).insertAfter(p),g=function(e){e=null==e?u.position().left:e,f.css({opacity:0>e?1:t.disabledOpacity}),m.css({opacity:p.width()<e+u.width()?1:t.disabledOpacity})},v=function(n){var o=p.width(),a=u.width();o&&a&&!(o>=a)&&e.isNumeric(n)&&(n>0?n=0:o-a>n&&(n=o-a),g(n),u.stop(!0,!1),clearInterval(d),u.animate({left:n},t.speed,t.effect),p.loadImages({left:n}))},w=function(e){return e.preventDefault(),y(),v(u.position().left+p.width()),!1},b=function(e){return e.preventDefault(),y(),v(u.position().left-p.width()),!1};f.on("click",w),m.on("click",b);var y=function(e){"number"==typeof c&&clearTimeout(c),c=typeof e!==UNDEF?e:setTimeout(function(){c=!1},t.seekStay)},T=function(){if(!u.data("dragOn")&&!c){var e=u.find(t.active).closest("li");if(e.length){var n=e.position().left,o=e.outerWidth(!0),a=Math.round(o*t.headRoom),i=u.position().left,r=p.width();if(r>u.width())return;if(n>r-o-a-i)i=Math.max(r-o-a-n,r-u.width());else{if(!(-i+a>n))return;i=-n+a}v(i)}}};u.on("setactive",T);var k=function(e,t){return e.preventDefault(),t&&(u.stop(!0,!1),clearInterval(d),y(),v(u.position().left+p.width()*(0>t?-1:1))),!1};t.enableMouseWheel&&u.on("mousewheel",k),g();var x=function(e){return h=e.touches&&e.touches.length>0?e.touches[0].clientX:e.clientX?e.clientX:h},S=function(){s+=Math.round(r/20);var e=i+s;return e>0||l>e?(clearInterval(d),void 0):(u.css({left:e}),r*=.8,Math.abs(r)<10&&(r=0,clearInterval(d)),void 0)},I=function(e){if(e.preventDefault(),o){var t=x(e)-o;t&&(u.data("dragOn",!0),u.css({left:Math.minMax(l,n+t,0)}))}else o=x(e);return!1},M=function(t){t.preventDefault(),i=u.position().left;var n=x(t)-o,s=(new Date).getTime()-a;return r=1e3*n/s,d=setInterval(S,50),y(),document.touchMode?(u[0].removeEventListener(TOUCH_MOVE,I),u[0].removeEventListener(TOUCH_END,M),Math.abs(n)<10&&e(t.target).parents("a").trigger("click")):e(document).off({mousemove:I,mouseup:M}),setTimeout(function(){u.data("dragOn",!1)},20),p.loadImages(),Math.abs(n)<4&&300>s},O=function(t){return t.preventDefault(),"touchstart"!==t.type&&"touchmove"!==t.type||!(!t.touches||t.touches.length>1||u.is(":animated"))?(u.stop(!0,!1),clearInterval(d),y(!0),n=u.position().left,o=x(t),a=(new Date).getTime(),s=0,l=p.width()-u.width(),l>=0?!0:(document.touchMode?(e(t.target).closest("a").focus(),u[0].addEventListener(TOUCH_MOVE,I),u[0].addEventListener(TOUCH_END,M)):e(document).on({mousemove:I,mouseup:M}),!1)):!0};document.touchMode?u[0].addEventListener(TOUCH_START,O):u.on("mousedown",O),u.attr("role","scroll").data("dragOn",!1),u.add(f).add(m).on("selectstart",noAction),p.loadImages()})},e.fn.scrollThumbs.defaults={active:".active",scleft:"scleft",scright:"scright",seekStay:3e3,speed:1500,incr:100,effect:"easeOutBack",headRoom:.67,disabledOpacity:.3,enableMouseWheel:!0}}(jQuery),function(e){e.extend(jQuery.easing,{easeOutCubic:function(e,t,n,o,a){return o*((t=t/a-1)*t*t+1)+n}}),e.fn.addSwipe=function(t,n,o){return o=e.extend({},e.fn.addSwipe.defaults,o),this.each(function(){var a,i,r,s,l,d,c,u,p=e(this),h=p.parent(),f=this,m=0,g=0,v=h.outerWidth(),w=h.outerHeight(),b=p.outerWidth(),y=p.outerHeight(),T=function(){v=h.outerWidth(),w=h.outerHeight()};e(window).on("resize.addswipe",function(){clearTimeout(i),i=setTimeout(T,50)});var k=function(e){return f.dragOn?!1:(e.target.trigger("click",e),void 0)},x=function(e){u?(d=(e.touches&&e.touches.length>0?e.touches[0].clientX:e.clientX)-s,p.translate(m+d,0)):(e.touches&&e.touches.length>0?(d=e.touches[0].clientX-s,c=e.touches[0].clientY-l):null!==e.clientX&&(d=e.clientX-s,c=e.clientY-l),p.translate(m+d,g+c))},S=function(){return L(),f.removeEventListener(TOUCH_MOVE,M),f.removeEventListener(TOUCH_END,S),!1},I=function(t){return t.preventDefault(),L(),e(document).off("mousemove.addswipe mouseup.addswipe"),!1},M=function(e){return e.preventDefault(),x(e),!1},O=function(e){return e.preventDefault(),x(e.originalEvent),!1},C=function(e){if(e.touches){if(e.touches.length>1)return!0;s=e.touches[0].clientX,l=e.touches[0].clientY}else s=e.clientX,l=e.clientY;return E(),f.addEventListener(TOUCH_MOVE,M),f.addEventListener(TOUCH_END,S),!0},D=function(e){s=e.originalEvent.clientX,l=e.originalEvent.clientY},F=function(t){return t.preventDefault(),D(t),E(),p.on("click.addswipe",k),e(document).on({"mousemove.addswipe":O,"mouseup.addswipe":I}),!1},E=function(){p.removeClass("smooth"),f.dragOn=!0,r=(new Date).getTime(),v=v||h.outerWidth(),b=p.outerWidth(),y=p.outerHeight(),u=w>=y,m=p.data("tr_x")||0,g=u?0:p.data("tr_y")||0,d=c=0,a=b>v?Math.round((b-v*(1-o.oversizeTreshold))/2):0},L=function(){if(u&&!a&&Math.abs(d)<o.treshold)f.dragOn=null,p.translate(0,0),p.trigger("click");
else{var i=(new Date).getTime()-r,s=m+d+300*d/i,l=u?0:g+c+300*c/i;p.translate(s,l,"smooth"),-a>s?e.isFunction(t)&&t.call(f):s>a&&e.isFunction(n)&&n.call(f)}return setTimeout(function(){f.dragOn=null},100),!1};p.attr("draggable","true"),document.touchMode?f.addEventListener(TOUCH_START,C):p.on({"dragstart.addswipe":F,"mousedown.addswipe":D});var N=function(){return setTimeout(function(){f.dragOn=null},20),p.translate(0,0,"smooth"),!1};p.on("dragcancel.addswipe",N);var P=function(){setTimeout(function(){f.dragOn=null},20),p.removeAttr("draggable"),document.touchMode?(f.removeEventListener(TOUCH_MOVE,M),f.removeEventListener(TOUCH_END,S),f.removeEventListener(TOUCH_START,C)):(p.off(".addswipe"),e(document).off(".addswipe"))};p.on("unswipe.addswipe",P),p.on("selectstart.addswipe",noAction)})},e.fn.addSwipe.defaults={treshold:40,oversizeTreshold:.2,margin:15}}(jQuery),function(e){var t=0,n=0,o=1,a=1,i=2,r=2;e.fn.alignTo=function(s,l){if(l=e.extend({},e.fn.alignTo.defaults,l),"string"==typeof s&&(s=e(s)),s instanceof e&&s.length){var d=s.offset(),c=s.outerWidth(),u=s.outerHeight(),p=e(window).width(),h=e(window).height();return e(this).each(function(){var s=e(this);s.css("maxHeight","none");var f=s.outerWidth(),m=s.outerHeight(),g=Math.round(d.left+l.pos[2]*c/2+(l.pos[2]-1)*l.gap),v=Math.round(d.top+l.pos[3]*u/2+(l.pos[3]-1)*l.gap),w=Math.round(g-l.pos[0]*f/2),b=Math.round(v-l.pos[1]*m/2);(0>b||b+m>h)&&(l.pos[2]!==o?b=2*b+m>h?h-m:0:l.pos[3]===n?h>2*d.top+u&&(b=d.top+u+l.gap):l.pos[3]===r&&h<2*d.top+u&&(b=Math.max(0,d.top-m-l.gap)),0>b&&(b=0),b+m>h&&s.css({overflow:"auto",maxHeight:h-b-(parseInt(s.css("paddingTop"),10)+parseInt(s.css("paddingBottom"),10))})),(0>w||w+f>p)&&(l.pos[3]!==a?w=2*w+f>p?p-f:0:l.pos[2]===t?p>2*d.left+c&&(w=d.left+c+l.gap):l.pos[2]===i&&p<2*d.left+c&&(w=Math.max(0,d.left-f-l.gap)),0>w&&(w=0),w+f>p&&s.css({overflow:"auto",maxWidth:p-w-(parseInt(s.css("paddingLeft"),10)+parseInt(s.css("paddingRight"),10))})),s.css({position:"absolute",left:w,top:b})})}},e.fn.alignTo.defaults={gap:5,pos:[o,r,o,n]}}(jQuery),function(e){e.fn.addPlayer=function(t){if(typeof e.fn.jPlayer!==UNDEF){t=e.extend({},e.fn.addPlayer.defaults,t);var n=getTranslations(e.fn.addPlayer.text),o=navigator.userAgent.indexOf("Firefox")>=0&&navigator.platform.indexOf("Mac")>=0,a={cont:"jp-cont",mini:"jp-mini",audio:"jp-audio",video:"jp-video",playerType:"jp-type-single",player:"jp-jplayer",title:"jp-title",progress:"jp-progress",controls:"jp-controls-holder",startStop:"jp-startstop",volume:"jp-volume",times:"jp-times",toggles:"jp-toggles",warning:"jp-warning",videoPlay:"jp-video-play",play:"jp-play",pause:"jp-pause",stop:"jp-stop",seekBar:"jp-seek-bar",playBar:"jp-play-bar",mute:"jp-mute",unmute:"jp-unmute",volumeBar:"jp-volume-bar",volumeBarValue:"jp-volume-bar-value",volumeMax:"jp-volume-max",currentTime:"jp-current-time",duration:"jp-duration",fullScreen:"jp-full-screen",restoreScreen:"jp-restore-screen",repeat:"jp-repeat",repeatOff:"jp-repeat-off",gui:"jp-gui",noSolution:"jp-no-solution",playing:"playing"},i=function(e){var t,o=function(e){return'<a class="'+a[e]+'" title="'+n[e]+'">'+n[e]+"</a>"};return t='<div class="'+a.progress+'"><div class="'+a.seekBar+'"><div class="'+a.playBar+'"></div></div></div>',t+='<div class="'+a.controls+'">',t+='<div class="'+a.startStop+'">'+o("play")+o("pause")+o("stop")+"</div>",t+='<div class="'+a.volume+'">'+o("mute")+o("unmute")+'<div class="'+a.volumeBar+'"><div class="'+a.volumeBarValue+'"></div></div>'+"</div>",t+='<div class="'+a.times+'"><div class="'+a.currentTime+'"></div><div class="'+a.duration+'"></div></div>',t+='<div class="'+a.toggles+'">'+(e?"":o("fullScreen")+o("restoreScreen"))+o("repeat")+o("repeatOff")+"</div>",t+="</div>"},r=function(e){var t=e.css("paddingTop"),n=e.css("paddingLeft"),o=e.css("paddingRight"),i=e.css("paddingBottom");e.find("."+a.gui).css({bottom:i,left:n,right:o}),e.find("."+a.title).css({top:t,left:n,right:o})},s=function(t,o,s){"absolute"!==t.css("position")&&"fixed"!==t.css("position")&&t.css({position:"relative"}),t.css({overflow:"hidden"});var l,d=e('<div class="'+(s?a.audio:a.video)+'"></div>').appendTo(t);return d=e('<div class="'+a.playerType+'"></div>').appendTo(d),l=e('<div class="'+a.player+'"></div>').appendTo(d),d.append('<div class="'+a.videoPlay+'"><a>'+n.play+"</a></div>"),o&&d.append('<div class="'+a.title+'"><ul><li>'+o+"</li></ul></div>"),d.append('<div class="'+a.gui+'">'+i(s)+"</div>"),d.find("."+a.gui+" a").attr("href",NOLINK),!document.touchMode&&t.hasClass(a.fullScreen)&&d.find("."+a.gui).hide(),t.append('<div class="'+a.noSolution+'">'+n.unsupportedMediaFormat+"</div>"),r(t),l},l=function(){var t;return(t=e(this).data("media"))&&t.jPlayer("pause"),!1},d=function(){var t;return(t=e(this).data("media"))&&t.jPlayer("destroy"),e(window).off("keydown",h),!1},c=function(){var t;return(t=e(this).data("media"))&&t.jPlayer("stop"),!1},u=function(){var t;return(t=e(this).data("media"))&&t.jPlayer("play"),!1},p=e(this).eq(0),h=function(e){if(document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName))return!0;var t=e?e.keyCode:window.event.keyCode;return 32===t?(p.find("."+a.player).jPlayer(p.data(a.playing)?"pause":"play"),!1):!0},f=function(e){return t.hasOwnProperty("audio")?t.audio:".mp3.m4a.f4a.rtmpa".indexOf(e.getExt())>0},m=function(){return e("."+a.cont).each(function(){return e(this).data(a.playing)?!0:void 0}),!1},g=function(e){var t,n=f(e)?"a":"v";switch(e.getExt()){case"mp3":t="mp3";break;case"mp4":t="m4"+n;break;case"ogg":t="og"+n;break;case"webm":t="webm"+n;break;case"flv":case"f4a":case"f4v":t="fl"+n;break;case"rtmp":t="rtmp"+n;break;default:t=null}return t};return this.each(function(){var i,r,p,v,w,b,y,T,k,x,S=e(this),I=t.folder||"",M=0;if(t.elem){k=e(this).find(t.elem),b=k.attr("href"),y=k.attr("title");var O=k.find("img:first");O.length?(T=O.attr("src"),y||(y=O.attr("alt"))):T=y=""}else b=t.src,y=t.title||"",T=t.poster||"",k=e('<a href="'+b+'"'+(y?' title="'+y+'"':"")+">"+(T?'<img src="'+T+'">':"")+"</a>").appendTo(e(this));if(LOCAL){var C=e('<div class="'+a.warning+'">'+n.localFlashWarning+"</a></div>").appendTo(k);k.css("position","relative"),C.hide(),setTimeout(function(){C.fadeIn()},2e3)}if(b){p=t.auto&&!t.lowPriority&&!m(),b.indexOf("::")>0?(b=b.split("::"),i=f(b[0]),r=g(b[0])):(i=f(b),r=g(b)),this.id||(this.id=t.id+e.fn.addPlayer.id++),w="#"+this.id,e(S).addClass(a.cont),t.mini&&e(S).addClass(a.mini),x=s(S,t.showTitle?y:"",i);var D=function(){var n,o,a={},i=t.relativeUrl?"":location.href.substring(0,location.href.lastIndexOf("/")+1);return e.isArray(b)?(M>=b.length&&(M=0),n=b[M]):(n=b,T&&(a.poster=(i+I+T).fixUrl())),o=g(n),a[o]=(i+I+n).fixUrl(),a},F=function(){if(e.cookie){var t=S.find("."+a.currentTime).text().split(":");t=t.length>2?60*(60*parseInt(t[0],10)+parseInt(t[1],10))+parseInt(t[2],10):60*parseInt(t[0],10)+parseInt(t[1],10),e.cookie("jp_"+S[0].id,(S.data(a.playing)?"1":"0")+"::"+t+"::"+x.jPlayer("option","volume").toString().substring(0,5)+(M!==UNDEF?"::"+M:""))}},E=function(t){if(e.cookie){var n=e.cookie("jp_"+t[0].id);if(n)return n=n.split("::"),{playing:"1"===n[0],time:parseInt(n[1]||0,10),volume:parseFloat(n[2]||.8),curr:parseInt(n[3]||0,10)}}return null};v=!i&&!o,S.on("setEndedFn",function(n,o){t.ended=o&&e.isFunction(o)?o:null}),x.jPlayer({cssSelectorAncestor:w,backgroundColor:t.backgroundColor,supplied:r,swfPath:t.resPath+"/"+t.swf,solution:t.solution,size:{width:"100%",height:"100%"},fullWindow:!i&&t.fullScreen,preload:"auto",loop:t.loop,volume:t.volume,autohide:{restored:v,full:v},ready:function(){var n=e(this),o=t.saveStatus?E(S):null;S.data("media",n),t.saveStatus&&(e(window).on("unload",F),o&&(M=o.curr));var a=D();k&&k.hide(),n.jPlayer("setMedia",a),S.on({play:u,pause:l,stop:c,destroy:d}),t.saveStatus&&o?(n.jPlayer("volume",o.volume),n.jPlayer(o.playing?"play":"pause",o.time)):t.auto&&!document.touchMode&&n.jPlayer("play"),t.lowPriority||e(window).on("keydown",h)},play:function(){e(this).jPlayer("pauseOthers"),S.data(a.playing,!0),document.touchMode&&settimeout(function(){S.find("."+a.title).fadeOut(1e3)},600)},pause:function(){S.data(a.playing,!1)},stop:function(){S.data(a.playing,!1),document.touchMode&&S.find("."+a.title).fadeIn(300)},ended:function(){e.isArray(b)&&(M+1<b.length||t.loop)?(M=(M+1)%b.length,e(this).jPlayer("setMedia",D()),t.auto&&e(this).jPlayer("play")):(S.data(a.playing,!1),e.isFunction(t.ended)&&t.ended.call())}})}})}},e.fn.addPlayer.id=0,e.fn.addPlayer.defaults={id:"jp_container_",backgroundColor:"#000000",resPath:"",swf:"Jplayer.swf",relativeUrl:!1,solution:"html,flash",volume:.8,auto:!1,loop:!1,keyboard:!0,lowPriority:!1,saveStatus:!1,mini:!1,fullScreen:!1,showTitle:!1,size:{width:"100%",height:"100%"}},e.fn.addPlayer.text={play:"play",pause:"pause",stop:"stop",mute:"mute",unmute:"unmute",fullScreen:"full screen",restoreScreen:"restore screen",repeat:"repeat",repeatOff:"repeat off",localFlashWarning:"Local Flash playback is possibly blocked by Flash security rules. Test videos in the uploaded album!",unsupportedMediaFormat:'<span>Unsupported media format</span>You might need to either update your browser or the <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a> or use another browser to play this media.'}}(jQuery),function(e){e.getLatLng=function(e){return typeof google===UNDEF||null==e?null:"string"==typeof e?(e=e.split(","),new google.maps.LatLng(parseFloat(e[0])||0,parseFloat(e[e.length-1])||0)):new google.maps.LatLng(e[0],e[1])},e.fn.addMap=function(t){if(typeof google===UNDEF||!google.maps)return this;t=e.extend({},e.fn.addMap.defaults,t);var n=t.resPath+"/marker-curr.png",o=t.resPath+"/marker.png",a=new google.maps.MarkerImage(n,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),i=new google.maps.MarkerImage(o,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),r=new google.maps.MarkerImage(t.resPath+"/marker-shadow.png",new google.maps.Size(24,24),new google.maps.Point(0,0),new google.maps.Point(8,24));return this.each(function(){var s,l,d,c,u,p,h,f=e(this),m=[];f.readData(t,"type,zoom,map,label,resPath,markers");var g=function(){f&&f.data("fresh")&&(d&&f.is(":visible")&&!f.parents(":hidden").length&&f.width()&&f.height()?(clearTimeout(u),f.width(f.parent().width()),google.maps.event.trigger(d,"resize"),d.setCenter(s),f.data("fresh",!1)):u=setTimeout(g,200))};if(c&&c.length&&c.remove(),c=e("<div>").css({position:"absolute",top:"-9000px",width:f.width(),height:f.height()}).appendTo("body"),f.data("fresh",!0).on({adjust:g,destroy:function(){d.getParentNode().removeChild(d),e(window).off("resize",g)}}),t.markers&&t.markers.length&&null!=t.curr)s=t.markers[t.curr].map;else{if(!t.map)return;s=e.getLatLng(t.map),l=t.label}null!==(p=e.cookie("mapType"))&&(t.type=p),null!==(p=e.cookie("mapZoom"))&&(t.zoom=parseInt(p,10)||t.zoom),setTimeout(function(){var u,p=new google.maps.Map(c[0],{zoom:t.zoom,center:s,scrollwheel:!1,mapTypeId:t.type.toLowerCase()});if(google.maps.event.addListener(p,"maptypeid_changed",function(){e.cookie("mapType",e.fn.addMap.defaults.type=p.getMapTypeId(),3600)}),google.maps.event.addListener(p,"zoom_changed",function(){e.cookie("mapZoom",e.fn.addMap.defaults.zoom=p.getZoom(),3600)}),t.markers&&t.markers.length>1){var g,v,w,b=Math.max(t.curr-t.range,0),y=Math.min(t.curr+t.range,t.markers.length),T=function(){t.click.call(this)};for(g=b;y>g;g++)w=t.markers[g],v={position:w.map,map:p,title:w.label,icon:g===t.curr?a:i,shadow:r,zIndex:g===t.curr?999:g},u=new google.maps.Marker(v),e.isFunction(t.click)&&w.link&&(u.link=w.link,google.maps.event.addListener(u,"click",T)),m.push(u)}else u=new google.maps.Marker(e.extend({position:s,map:p,title:l},n));c.css({top:0}).appendTo(f),d=p,h=t.curr,f.on("setactive",function(t,a){e.isArray(m)&&m.length&&(h>=b&&(m[h].setIcon(o),m[h].setZIndex(h)),typeof a!==UNDEF&&a>=b&&a<b+m.length?(m[a-b].setIcon(n),m[a-b].setZIndex(9999),d.setCenter(m[a-b].position),h=a):h=-1)})},20),e(window).on("resize",function(){clearTimeout(u),f.data("fresh",!0),u=setTimeout(g,100)})})},e.fn.addMap.defaults={type:"roadmap",zoom:16,range:30,resPath:""}}(jQuery),function(e){var t=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},n=function(e){t()||(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&document.body.msRequestFullscreen())},o=function(){t()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())};e.fn.fullScreen=function(e){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?typeof e===UNDEF?t():(e?n(this[0]):o(),void 0):!1}}(jQuery);var xDecrypt=function(e){var t,n,o,a=[147,163,87,254,153,4,198,23],i=e.length,r=5*Math.ceil(i/8),s=new Array(r),l="",d=0;for(t=0;r>t;t++)s[t]=0;for(t=0;i>t;t++)(o=e.charCodeAt(t)-48)>9&&(o-=7),o<<=11-d%8,n=Math.floor(d/8),r>n&&(s[n]|=o>>8,++n<r&&(s[n]|=255&o)),d+=5;for(t=0;r>t;t++)s[t]^=a[t%8];for(r=s[0]|s[1]<<8,o=0,t=4;r>t;t++)l+=String.fromCharCode(s[t]),o+=s[t];return o!=(255&s[2]|s[3]<<8)&&(l=""),l};!function(e){e.fn.addShop=function(t,n){if(n=e.extend({},e.fn.addShop.defaults,n),!t||!t.length||!n.id)return this;var o,a,i,r,s,l,d=e.fn.addShop.id,c=e.fn.addShop.text,u=n.id.replace("|","@"),p=DEBUG?e.fn.addShop.st.sandboxurl:e.fn.addShop.st.url,h=e.fn.addShop.st.curr_symbol[n.currency]||n.currency,f=(e.fn.addShop.st.btn_lng[n.locale]||"en_US",e(this).eq(0)),m=t.length,g=m>1?e.fn.addShop.st.targetCart:e.fn.addShop.st.target,v=function(e){var t,n,o,a,i=e.split("::"),r=[];for(t=0;t<i.length;t++)if(n=i[t].split("="),n.length>1){if(a={},a.label=n[0],o=n[1].split("+"),null==(a.price=parseFloat(o[0])))continue;a.shipping=o.length>1?parseFloat(o[1]):0,a.shipping2=o.length>2?parseFloat(o[2]):a.shipping,a.text=n[0]+" = "+h+" "+a.price.toFixed(2)+(o.length>1?"+"+a.shipping.toFixed(2):""),r.push(a)}return r},w=function(t,n){var o,a=e("<select>").appendTo(t);for(o=0;o<n.length;o++)a.append(e("<option>",{val:n[o].price,html:n[o].text}));return a},b=function(t,n,o,a,i){if(!t||!n)return{};var r=e("<input>",{type:a||"text"}).appendTo(t);return r.prop("name",n),o&&r.val("string"==typeof o?o.stripQuote():o),i&&r.prop(i,!0),r},y=function(e){return typeof e===UNDEF?x(m>1?d.discountRateCart:d.discountRate):(m>1?x(d.discountRateCart,e):(x(d.discountRate,e),x(d.discountRate+"2",e)),void 0)},T=function(e){return typeof e===UNDEF?x(m>1?d.discountAmountCart:d.discountAmount):(x(m>1?d.discountAmountCart:d.discountAmount,e),void 0)},k=function(e,t){var n=a.children("[name="+d.option+"]");if(n&&n.length){var o=n.val().replace(/(\s\(CC\:.+\))$/,"");n.val(o+" (CC:"+e+(typeof t!==UNDEF?"="+t:"")+")")}},x=function(e,t){var n=a.children("[name="+e+"]");return typeof t===UNDEF?n&&n.length?parseFloat(n.val()):null:(null==t?n.remove():n&&n.length?n.val(t):b(a,e,t,"hidden"),void 0)},S=function(){var e=o.children("select").eq(0);return e&&e.length?e.prop("selectedIndex"):0},I=function(){var t=S(),n=o.children(".discount").eq(0),a=o.children(".total").eq(0),i=o.children("[name=copies]").val()||1,r=l[t].price,s=l[t].shipping+(i-1)*l[t].shipping2,d=T(),c=y();n.length||(n=e("<span>",{"class":"discount"}).insertAfter(o.children("select"))),d&&d>0?(n.show().html("- "+h+" "+d.toFixed(2)),a.html(h+" <b>"+(m*(i*r+s)-d).toFixed(2)+"</b>")):c&&c>0?(n.show().text("-"+c+"%"),a.html(h+" <b>"+(m*(i*r*(100-c)/100+s)).toFixed(2)+"</b>")):(n.hide(),a.html(h+" <b>"+(m*(i*r+s)).toFixed(2)+"</b>"))},M=function(){var e=S(),t=o.children("[name=copies]").val()||1,a=l[e].price,i=l[e].shipping,r=l[e].shipping2;if(n.quantityCap&&t>n.quantityCap&&o.children("[name=copies]").val(t=n.quantityCap),m>1)for(var s=1;m>=s;s++)x(d.price+"_"+s,a),x(d.copies+"_"+s,t),x(d.shipping+"_"+s,i?i:null),x(d.shipping2+"_"+s,r?r:null);else x(d.price,a),x(d.copies,t),x(d.shipping,i?i:null),x(d.shipping2,r?r:null);x(d.option,l[e].text),I()},O=function(t){var a,i,s=new Date,d=t===!0;if(n.coupons&&(a=o.children("[name=coupon]"))&&(i=a.val().trim()).length){var u,p,f,g=xDecrypt(n.coupons).split("::");for(u=0;u<g.length;u++)if(p=g[u].split(/=|\s*<\s*/),p[0]===i&&p.length>1){if(f=parseFloat(p[1]),.01>f)continue;if(p.length>2){var v,w=p[2].split(/-|:|\//);if(w.length<2&&(w[1]=1),w.length<3&&(w[2]=1),v=new Date(parseInt(w[0]),parseInt(w[1]),parseInt(w[2])),s>v)return e("body").addModal(e("<div>",{html:c.expired.replace("{0}",i)}),{type:"error"}),!1}if("%"===p[1].charAt(p[1].length-1)){if(f>99||1>f)continue;var b=y();b>f?d&&e("body").addModal(e("<div>",{html:c.lowerThanCurrent.replace("{0}",b+"%")}),{type:"warning"}):(d&&e("body").addModal(e("<div>",{html:c.accepted.replace("{0}",f+"%")}),{title:c.success}),y(f),k(i,f+"%"),e.cookie("discountRate",i,86400))}else if(e.cookie("discount_"+i))d&&e("body").addModal(e("<div>",{html:c.reclaimed}),{type:"warning"}),T(null),r&&(y(r),k(i,r+"%"));else{var b=y(),x=l[S()].price,M=T()||(b>0?m*x*b/100:0);f>x*m?d&&e("body").addModal(e("<div>",{html:c.higherThanPrice.replace("{0}",h+"&nbsp;"+f)}),{type:"warning"}):M>f?d&&e("body").addModal(e("<div>",{html:c.lowerThanCurrent.replace("{0}",h+"&nbsp;"+M.toFixed(2))}),{type:"warning"}):(d?e("body").addModal(e("<div>",{html:c.accepted.replace("{0}",h+"&nbsp;"+f)}),{title:c.success}):(e.cookie("discount_"+i,f,86400),r=y(),y(null)),T(f),k(i,n.currency+" "+f))}return I(),!0}return e("body").addModal(e("<div>",{html:c.noSuch}),{type:"error"}),!1}return!0};if(l=v(n.options),l.length){if(o=e("<form>",{name:"shopping",method:"post"}).appendTo(f),m>1&&o.append(e("<span>",{"class":"count",html:"<b>"+m+"</b> &times;"})),s=w(o,l),s.on("change",M),n.hasOwnProperty("discount")||(n.discount=e.fn.addShop.defaults.discount||0),"-"===n.discount&&(n.discount=0),1!==n.quantityCap&&(o.append("&times;"),s=b(o,"copies",1),s.addClass("copies").on("change",M)),o.append("="),o.append(e("<span>",{"class":"total"})),n.coupons){o.append(e("<input>",{type:"text",name:"coupon","class":"coupon",placeholder:c.couponCode}));var C=e("<a>",{href:NOLINK,html:"&nbsp;","class":"redeem"}).on("click",function(e){return e.preventDefault(),O(!0),!1});document.touchMode||C.addTooltip(c.redeem),o.append(C)}if(a=e("<form>",{name:d.form,target:n.continueUrl?"_blank":g,action:p+"cgi-bin/webscr/",method:"post"}).appendTo(f),x("cmd","_cart"),x("charset","utf-8"),x("lc",n.locale),x(d.seller,u),x(d.currency,n.currency),x(d.shopUrl,n.continueUrl||decodeURIComponent(window.location.href)),null!=n.handling&&e.isNumeric(n.handling)&&x(d.handlingCart,n.handling),x(d.option,l[0].label),n.discount&&n.discount<100&&y(n.discount),m>1){x("upload",1),x(d.name,m+" "+c.items);var D;t.each(function(t){s=e(this).find("img:first"),D=s.data("src")||s.attr("src")||"",x(d.name+"_"+(t+1),decodeURIComponent(D.getFile()+" ["+n.path+D.getDir().replace("thumbs/","")+"]"))})}else x("add",1),s=t.eq(0).find("img:first"),x(d.name,decodeURIComponent((s.data("src")||s.attr("src")||"").getFile()+" ["+n.path+"]"));if(M(),a.append(e("<button>",{id:"shopAdd",name:"submit","class":"paypalbtn",html:m>1?c.buyNow:c.addCart})),a.on("submit",function(t){var o=!0,a=e(t.target);return n.coupons&&(o=O()),o&&(a.parents("[role=modal]").trigger("destroy"),window.open("",g,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")),o}),n.coupons){var F=e.cookie("discountRate");F&&(e("input[name=coupon]").val(F),O(!1))}return 1===m&&(i=e("<form>",{"class":"view",name:"paypalview",target:g,action:p+"cgi-bin/webscr/",method:"post"}).appendTo(f),b(i,"cmd","_cart","hidden"),b(i,"lc",n.locale,"hidden"),b(i,d.seller,u,"hidden"),b(i,"display",1,"hidden"),i.append(e("<button>",{id:"shopView","class":"paypalbtn",name:"submit",html:c.viewCart})),i.on("submit",function(){return window.open("",g,"width=1024,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no"),!0})),I(),this}},e.fn.addShop.defaults={currency:"EUR",locale:"US",quantityCap:0,shippingFlat:!1},e.fn.addShop.text=getTranslations({addCart:"Add to Cart",viewCart:"View Cart",buyNow:"Buy Now",items:"items",success:"Success",couponCode:"Coupon code",redeem:"Redeem",noSuch:"No such coupon exists!",expired:"The coupon code <b>{0}</b> has expired!",accepted:"The coupon code is accepted. You will get <b>{0}</b> discount the next time you add this item to the cart.",lowerThanCurrent:"This coupon offers lower discount than the current <b>{0}</b>.",higherThanPrice:"You can use this coupon only for items priced higher than <b>{0}</b>.",reclaimed:"This coupon has already been used!"}),e.fn.addShop.st={target:"ShoppingCart",targetCart:"BuyNow",url:"https://www.paypal.com/",sandboxurl:"https://www.sandbox.paypal.com/",btn_lng:{DE:"de_DE",FR:"fr_FR",IT:"it_IT",ES:"es_ES",PT:"pt_PT",PT:"pt_BR",DA:"da_DK",NL:"nl_NL",NO:"no_NO",SV:"sv_SE",TR:"tr_TR",RU:"ru_RU",PL:"pl_PL",IL:"he_IL",TH:"th_TH"},curr_symbol:{USD:"US$",EUR:"&euro;",GBP:"GB&pound;",JPY:"&yen;",HUF:"Ft"}},e.fn.addShop.id={form:"paypal",seller:"business",currency:"currency_code",name:"item_name",option:"item_number",custom:"custom",price:"amount",priceCart:"amount_1",copies:"quantity",discountRate:"discount_rate",discountRateCart:"discount_rate_cart",discountAmount:"discount_amount",discountAmountCart:"discount_amount_cart",shipping:"shipping",shipping2:"shipping2",handlingCart:"handling_cart",shopUrl:"shopping_url"}}(jQuery),function(e){var t="",n="",o="";e.fn.addSocial=function(a){a=e.extend({},e.fn.addSocial.defaults,a);var i=getTranslations(e.fn.addSocial.text),r=window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):""),s=encodeURIComponent(window.location.href.split("#")[0]+(a.useHash?"#"+encodeURIComponent(a.hash||""):"")),l=encodeURIComponent(a.title||e("meta[name=title]").attr("content")||e("title").text()),d=encodeURIComponent(i.checkOutThis),c=a.inline?90:a.width,u=22,p=a.image?window.location.href.getDir()+a.image:e("link[rel=image_src]").attr("href");return this.each(function(){var h=e(this);"a"===this.nodeName&&h.attr("href",NOLINK);var f=e("<div>",{"class":a.className});if(LOCAL&&!DEBUG)f.html(i.localWarning);else{if(!LOCAL){if(!a.useHash){if(a.facebookLike&&f.append('<div class="likebtn"><iframe src="https://www.facebook.com/plugins/like.php?href='+r+"&amp;layout=button_count&amp;show_faces=false&amp;width="+c+"&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+"&amp;height="+u+'" scrolling="no" frameborder="0" style="border:none;overflow:hidden;width:'+c+"px;height:"+u+'px;" allowTransparency="true"></iframe></div>'),a.twitterTweet&&f.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="//platform.twitter.com/widgets/tweet_button.html?url='+r+"&text="+l+'" style="width:'+c+"px; height:"+u+'px;"></iframe></div>'),a.googlePlus){var m=a.inline?90:120,g=e('<div class="likebtn" style="max-width:'+m+"px;min-width:"+m+'px;"><div class="g-plusone" data-href="'+r+'"></div></div>').appendTo(f),v=20,w=function(){typeof gapi===UNDEF?v--?setTimeout(w,200):typeof console!==UNDEF&&console.log("Google Plus API failed to load!"):setTimeout(function(){gapi.plusone.render(g[0],{size:"medium",annotation:"bubble"})},200)};w()}a.pinItBtn&&f.append('<div class="likebtn" style="height:'+u+'px;"><a data-pin-config="beside" href="//pinterest.com/pin/create/button/?url='+s+"&media="+encodeURIComponent(p)+"&description="+l+'" data-pin-do="buttonPin" ><img src="http://assets.pinterest.com/images/pidgets/pin_it_button.png" /></a></div>')}a.tumblrBtn&&(f.append('<div class="likebtn" id="tumblr"><a href="//www.tumblr.com/share/'+(a.image?"photo?source=":"link?url=")+encodeURIComponent(r)+"&name="+l+'" title="Share on Tumblr" style="display:inline-block;text-indent:-9999px;overflow:hidden;width:'+c+"px;height:"+u+'px;background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</a></div>'),t=p,n=l,o=r)}(a.facebook||a.twitter||a.gplus||a.pinterest||a.digg||a.delicious||a.myspace||a.stumbleupon||a.reddit||a.email)&&(a.buttonLabels||f.append("<span>"+i.shareOn+"</span>"),a.facebook&&f.append('<a href="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D='+s+"&p%5Bimages%5D%5B0%5D="+encodeURIComponent(p)+"&p%5Btitle%5D="+l+'" class="facebook"'+(a.buttonLabels?">Facebook":' title="Facebook">')+"</a>"),a.twitter&&f.append('<a href="http://twitter.com/home?status='+d+": "+s+'" class="twitter"'+(a.buttonLabels?">Twitter":' title="Twitter">')+"</a>"),a.gplus&&f.append(e("<a>",{"class":"gplus",href:"https://plus.google.com/share?url="+s,title:"Google+",text:a.buttonLabels?"Google+":""}).on("click",function(){return window.open(this.href,this.title,"menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=760,width=980"),!1})),a.pinterest&&f.append('<a href="http://pinterest.com/pin/create/button/?url='+s+"&media="+encodeURIComponent(p)+"&description="+l+'" class="pinterest"'+(a.buttonLabels?">Pinterest":' title="Pinterest">')+"</a>"),a.digg&&f.append('<a href="http://digg.com/submit?url='+r+'" class="digg"'+(a.buttonLabels?">Digg":' title="Digg">')+"</a>"),a.delicious&&f.append('<a href="http://delicious.com/save?url='+r+"&title="+l+'&v=5" class="delicious"'+(a.buttonLabels?">Delicious":' title="Delicious"')+"</a>"),a.myspace&&f.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+l+"&u="+r+'&l=3" class="myspace"'+(a.buttonLabels?">MySpace":' title="MySpace"')+"</a>"),a.stumbleupon&&f.append('<a href="http://www.stumbleupon.com/submit?url='+r+"&title="+l+'" class="stumbleupon"'+(a.buttonLabels?">StumbleUpon":' title="StumbleUpon">')+"</a>"),a.reddit&&f.append('<a href="http://www.reddit.com/submit?url='+r+'" class="reddit"'+(a.buttonLabels?">Reddit":' title="Reddit"')+"</a>"),f.children("a").attr("target","_blank"),a.email&&f.append('<a href="mailto:?subject='+d+"&body="+l+"%0D%0A"+r.replace(/%/g,"%25")+'" class="email"'+(a.buttonLabels?">Email":' title="Email">')+"</a>"),a.buttonLabels||document.touchMode||f.children("a").addTooltip())}h.on("destroy",function(){f.remove()}),a.inline?f.appendTo(h):h.addTooltip(f,{width:a.width,stay:5e3,pos:a.pos})})},e.fn.addSocial.defaults={className:"shares",width:120,useHash:!0,likeBtnTheme:"light",inline:!1,buttonLabels:!0,pos:[1,2,1,0]},e.fn.addSocial.text={shareOn:"Share on",checkOutThis:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}}(jQuery),function(e){e.fn.readData=function(t,n){if(null==t||null==n)return this;n=n.split(",");var o,a,i=n.length;return this.each(function(){for(o=0;i>o;o++)null!=(a=e(this).data(n[o]))&&(t[n[o]]=a)})},e.fn.showin=function(){return this.each(function(){e(this).css("display","inline-block")})},e.fn.togglein=function(t){return typeof t===UNDEF?this.each(function(){e(this).css("display","none"===e(this).css("display")?"inline-block":"none")}):(e(this).css("display",t?"inline-block":"none"),this)},e.fn.getDim=function(){var t=e(this).eq(0),n={width:t.width(),height:t.height()};if((0===n.width||0===n.height)&&"none"===t.css("display")){var o=t.css("position"),a=t.css("left");t.css({position:"absolute",left:"-10000px",display:"block"}),n.width=t.width(),n.height=t.height(),t.css({display:"none",position:o,left:a})}return n},typeof Search!==UNDEF&&(Search.text=getTranslations({searchBoxTip:"Search...",searchResultsFor:"Search results for",newImages:"New images",notFound:"Not found",close:"Close"}),Search.start=function(t){if(null!=t){var n,o,a,i,r,s,l,d,c,u,p,h,f,m,g,v,w,b,y,T="string"==typeof t||e.isNumeric(t)?String(t):"FORM"===t.nodeName?e(t).find("input[type=search]").val().trim():e(t).text().trim(),k=0,x=!1;if(Search.data&&e.isArray(Search.data)&&Search.data.length&&T&&!(T.length<2)){n=e("<div>",{"class":"searchresults"});var S=function(t){t.preventDefault();var n=e(this).closest("form").children("input:first").val().trim();return n.length>=2&&Search.start(n),!1};T.startsWith("@new")?(x=!0,i=Search.created||Math.floor((new Date).getTime()/864e5),a=parseInt(T.split(":")[1],10)||30):(y=new RegExp("("+T.replace(/\s/g,"|")+")","i"),n.append('<form><input type="text" value="'+T+'"><a class="button">&nbsp;</a></form>'),n.find("a.button").on("click",S),n.find("form").on("submit",S)),f=Search.rootPath&&"."!==Search.rootPath?Search.rootPath+"/":"",s=window.location.href.getRelpath(Math.floor(f.length/3));var I=function(t){var n=e(t.target).closest("a");return n.length&&n.hasClass("active")&&window.location.href.endsWith(n.attr("href"))?(t.cancelBubble=!0,!1):(Search.makeSlides||(n.addClass("active"),n.siblings(".active").removeClass("active")),e.cookie("lastSearch",T,8),!0)};for(l=0;l<Search.data.length;l++)for(h=f,Search.data[l][0].length&&(h+=(Search.urlEncode?Search.data[l][0]:encodeURIComponent(Search.data[l][0]).replace(/%2F/g,"/"))+"/"),u=Search.data[l][1].length,d=0;u>d;d++)if(m=Search.data[l][1][d].split(Search.sep),x&&m.length>5&&(r=i-parseInt(m[5],10))<a||!x&&y.test(Search.data[l][1][d])){switch(g=m[0].split(":"),b=g[0].getExt(),w=g.length>1?g[1]:g[0].substring(g[0].lastIndexOf(".")+1),v=encodeURIComponent(g[0]),b.toLowerCase()){case Search.ext:g=h+Search.folderThumb;break;case"tif":case"bmp":Search.makeSlides||(v=v.replaceExt(w));case"jpg":case"jpeg":case"png":case"mp4":g=h+Search.thumbs+"/"+v.replaceExt(w);break;case"mp3":g="png"===w?f+"res/audio.png":h+Search.thumbs+"/"+v.replaceExt(w);break;case"gif":v=v.replaceExt(w),g=h+Search.thumbs+"/"+v;break;case"pdf":case"zip":case"txt":case"doc":case"xls":g=f+"res/"+b+".png";break;default:g=f+"res/unknown.png"}for(b===Search.ext?(v=h+v,g=h+Search.folderThumb):v=h+(Search.makeSlides?Search.slides+"/"+v.replaceExt(Search.ext):Search.indexName+"#"+(Search.urlEncode?v.replace(/\'/g,"%27").replace(/%/g,"%25").replace(/\(/g,"%2528").replace(/\)/g,"%2529"):v)),p=e("<a>",{href:v.fixUrl()}).append(e("<aside>").append(e("<img>",{src:g}))).on("click",I).appendTo(n),v.endsWith(s)&&p.addClass("active"),m[1]&&p.append(e("<h5>").append(x?m[1]:m[1].replace(y,"<em>$1</em>"))),m[2]&&m[2]!==m[1]&&p.append(e("<p>").append(x?m[2].trunc(192):m[2].trunc(192).replace(y,"<em>$1</em>"))),c=3;c<m.length-1;c++)m[c]&&m[c].trim().length&&p.append(e("<p>").append(x?m[c].trunc(192):m[c].trunc(192).replace(y,"<em>$1</em>")));x&&p.append(e("<p>").append("<em>"+getRelativeDate(r)+"</em>")),window.location.hash===m[0]&&(o=k),k++}return t.jquery&&e(t).parents(".hint:first").fadeOut(100,function(){e(this).remove()}),k?setTimeout(function(){e(".searchresults > a").eq(o||0).focus()},250):n.append(e("<p>",{text:Search.text.notFound})),e("body").addModal(n,{uid:"searchres",title:T.startsWith("@new")?Search.text.newImages:Search.text.searchBoxTip,darkenBackground:!1,movable:!0,blocking:!1,closeOnClickOut:!1,defaultButton:"close",resizable:!0,width:240,pos:[2,0],scrollIntoView:!0,savePosition:!0}),!1}}},Search.rootPath="",Search.init=function(t){Search.rootPath=t;var n=e.cookie("lastSearch");n&&n.length&&"null"!==n&&(e.cookie("lastSearch",null),Search.start(n))}),e.fn.addRegions=function(t,n,o){if(t&&t.length&&n){o=e.extend({},e.fn.addRegions.defaults,o);var a=[],i=function(){var e,t,o,i,r,s,l=n.split("::");for(e=0;e<l.length;e++)t=l[e].split(";"),t.length>4&&t[0].length&&null!==(o=parseFloat(t[1]))&&null!==(i=parseFloat(t[2]))&&null!==(r=parseFloat(t[3]))&&null!==(s=parseFloat(t[4]))&&a.push([t[0],100*o+"%",100*i+"%",100*r+"%",100*s+"%"])};return i(),a.length?this.each(function(){var n,i,r=e(this),s=parseInt(r.css("padding-top"),10);"a"===this.nodeName&&r.attr("href",NOLINK);for(var l=e("<div>",{"class":o.id}).hide(),d=e("<div>",{"class":o.id+"-cont"}).css({left:s,top:s,right:s,bottom:s}),c=function(e){return e.preventDefault(),Search.start(e.target),!1},u=function(t){d.children("a").eq(e(t.target).index()).addClass(o.active)
},p=function(t){d.children("a").eq(e(t.target).index()).removeClass(o.active)},h=0;h<a.length;h++)n=e('<a href="'+NOLINK+'">'+a[h][0]+"</a>").appendTo(l),i=e("<a>").css({left:a[h][1],top:a[h][2],width:a[h][3],height:a[h][4]}).append(e("<span>",{text:a[h][0]})).appendTo(d),n.on({mouseover:u,mouseout:p}),typeof Search!==UNDEF&&i.on("click",c);r.addTooltip(l,{stay:5e3}),r.on("destroy",function(){l.remove()}),r.hasClass(o.active)&&d.addClass(o.active),r.on("click",function(){e(this).add(d).toggleClass(o.active)}),t.append(d)}):this}},e.fn.addRegions.defaults={id:"regions",active:"active",pos:[1,2,1,0]},e.fn.centerThis=function(t){return t=e.extend({},e.fn.centerThis.defaults,t),this.each(function(){var n=e(this),o=n.find(t.selector);if(o.length){var a,i,r,s,l,d,c,u,p,h,f=t.marginLeft+t.padding,m=t.marginRight+t.padding,g=t.marginTop+t.padding,v=t.marginBottom+t.padding;if(c=o.data("ow"),u=o.data("oh"),c&&u||(o.data("ow",c=o.width()),o.data("oh",u=o.height())),(p=o.data("bw"))||o.data("bw",p=parseInt(o.css("border-top-width"),10)||0),(h=o.data("pw"))||o.data("pw",h=parseInt(o.css("padding-top"),10)||0),a=(n.innerWidth()||e("body").width())-2*(p+h)-f-m,i=(n.innerHeight()||e("body").height())-2*(p+h)-g-v,t.fit&&(c>a||u>i||t.enlarge)){var w=Math.min(a/c,i/u);r=Math.round(c*w),s=Math.round(u*w)}else r=c,s=u;if(l=Math.round((a-r)/2)+f,d=Math.round((i-s)/2)+g,r!==c&&o.translateToPos(),t.animate){if(o.stop(!0,!1),t.preScale&&1!==t.preScale){var b=r*t.preScale,y=s*t.preScale;o.css({left:Math.round((a-b)/2)+f,top:Math.round((i-y)/2)+g,width:Math.round(b),height:Math.round(y)})}else t.init&&o.css({left:l,top:d});o.animate({left:l,top:d,width:r,height:s},{duration:t.speed,easing:t.effect,complete:t.complete})}else o.css({left:l,top:d,width:r,height:s}),e.isFunction(t.complete)&&t.complete.call(this)}})},e.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null},e.fn.collectMarkers=function(t){t=e.extend({},e.fn.collectMarkers.defaults,t);var n,o,a,i=[];return this.each(function(r){n=e(this).find(t.selector),n.length&&(o=n.data(t.mapid))&&(o=e.getLatLng(o))&&(a=n.data(t.captionid)||n.attr("alt"),i.push({map:o,label:r+1+(a?": "+a.stripHTML():""),link:t.dynamic?e(this):e(this).attr("href")}))}),i},e.fn.collectMarkers.defaults={selector:"img:first",mapid:"map",captionid:"caption"},e.fn.markFoldersNew=function(t){if(t=e.extend({},e.fn.markFoldersNew.defaults,t),text=getTranslations(e.fn.markFoldersNew.text),t.days){var n=t.ref||Math.round((new Date).getTime()/864e5);return this.each(function(){n-parseInt(e(this).data("modified")||0,10)<=t.days&&e(this).after('<span class="'+t.cls+'">'+text.newItem+"</span>")})}},e.fn.markFoldersNew.defaults={days:7,cls:"newlabel"},e.fn.markFoldersNew.text={newItem:"NEW"},e.fn.turtleHelp=function(t){t=e.extend({},e.fn.turtleHelp.defaults,t);var n=getTranslations(e.fn.turtleHelp.text),o=e("<div>",{"class":"help"}),a=function(t){if(n.hasOwnProperty(t)){var a,i=1,r=e("<ul>",{"class":t}).appendTo(o);for(a in n[t])r.append(e("<li><span>"+i++ +"</span>"+n[t][a]+"</li>"))}};t.index&&a("index"),t.slide&&a("slide"),t.pressF1&&o.append(e("<p>",{html:n.help_pressF1}));var i=function(){e("body").addModal(o,{uid:"help",title:n.help_title,width:720,savePosition:!0,resizable:!0})};return t.useF1&&!document.touchMode&&e(document).on("keydown",function(n){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard()||e("#help").is(":visible"))return!0;var o=n?n.keyCode:window.event.keyCode;return 112===o?(n.preventDefault(),i(),!1):!0}),this.each(function(){e(this).on("click",function(e){return e.preventDefault(),i(),!1})})},e.fn.turtleHelp.defaults={useF1:!0,index:!0,slide:!1},e.fn.turtleHelp.text={help_title:"Using Turtle gallery",help_pressF1:"Press <b>F1</b> any time to get help!",index:{help_topNavigation:"Top <b>navigation</b> bar with <b>Home</b> button",help_upOneLevel:"<b>Up</b> one level",help_authorInfo:"Author or company <b>information</b>",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_searchNew:"Search <b>new images</b>",help_search:"<b>Search</b> button",help_downloadZip:"<b>Download</b> album or current folder as ZIP file",help_startSlideshow:"Start <b>slideshow</b> <em>Numpad *</em>"},slide:{help_previousPicture:"<b>Previous</b> picture <em>Left arrow</em><em>Swipe right</em>",help_backToIndex:"Back to <b>thumbnail page</b> / up one level <em>Esc</em>",help_toggleFit:"Toggle <b>fit to screen</b> or <b>1:1</b> size <em>Numpad +</em>",help_toggleInfo:"Show/hide <b>captions</b> and other panels, like Metadata, Map, Shopping, etc. <em>Numpad -</em>",help_toggleThumbnails:"Show/hide <b>thumbnail</b> scroller <em>Numpad -</em>",help_toggleAutoPlay:"Start/stop <b>slideshow</b> <em>Numpad *</em>",help_nextPicture:"<b>Next</b> picture <em>Right arrow</em><em>Swipe left</em>",help_toggleMeta:"Toggle <b>photo data</b>",help_toggleMap:"Toggle <b>map</b>",help_toggleShop:"Toggle <b>shopping options</b> panel",help_downloadImage:"Download <b>high resolution</b> file",help_shareAndLike:"<b>Share</b> and <b>Like</b> buttons for social networking",help_toggleComments:"Toggle <b>Facebook comments</b>",help_toggleFaces:"Toggle visibility of <b>tagged people</b>"}},e.fn.turtle=function(t,n){t=e.extend({},e.fn.turtle.defaults,t),n=e.fn.turtle.ids;var o=getTranslations(e.fn.turtle.text),a=function(n,o,a){e.cookie(n,o,a),t[n]=o};!function(n){for(var o,a=0;a<n.length;a++)null!==(o=e.cookie(n[a]))&&(t[n[a]]=o)}(["thumbsOn","infoOn","commentsOn","metaOn","mapOn","regionsOn","shopOn","shareOn","printOn","fitImage","slideshowDelay","slideshowOn"]),document.touchMode&&(t.preScale=!1),e.fn.addScroll.defaults.dontDrag="#"+n.map,e.fn.addMap.defaults.zoom=t.mapZoom,e.fn.addMap.defaults.type=t.mapType,e.fn.addMap.defaults.resPath=t.resPath,e.fn.addShop.defaults.id=t.shopId,e.fn.addShop.defaults.path=(t.albumName?t.albumName+"/":"")+t.relPath,e.fn.addShop.defaults.currency=t.shopCurrency||"EUR",e.fn.addShop.defaults.handling=t.shopHandling||null,e.fn.addShop.defaults.locale=t.shopLocale||"US",e.fn.addShop.defaults.quantityCap=t.shopQuantityCap||0,e.fn.addShop.defaults.discount=t.shopDiscount||0,e.fn.addShop.defaults.options=t.shopOptions||"",e.fn.addShop.defaults.coupons=t.shopCoupons||"",t.shopContinueUrl&&(e.fn.addShop.defaults.continueUrl=t.shopContinueUrl.match(/^https?:/i)?t.shopContinueUrl:window.location.origin+t.shopContinueUrl),e.fn.addPlayer.defaults.backgroundColor=e("body").css("background-color").rgb2hex(),t.linkSlides||(e.fn.addPlayer.defaults.fullScreen=t.videoMaximize,e.fn.addPlayer.defaults.auto=t.videoAuto,e.fn.addPlayer.defaults.solution=t.prioritizeFlash?"flash,html":"html,flash"),e.fn.centerThis.defaults.fit=t.fitImage,e.fn.centerThis.defaults.animate=t.transitions,e.fn.centerThis.defaults.padding=t.fitPadding,e.fn.centerThis.defaults.enlarge=!t.fitShrinkonly,e.fn.centerThis.defaults.selector="."+n.main,function(t){for(var n in t)t.hasOwnProperty(n)&&(e.fn.addSocial.defaults[n]=t[n])}(t.shares),t.shareSlides=t.shares&&(t.linkSlides&&t.shares.facebookLike||t.shares.facebook||t.shares.twitter||t.shares.gplus||t.shares.pinterest||t.shares.digg||t.shares.delicious||t.shares.myspace||t.shares.stumbleupon||t.shares.reddit||t.shares.email);var i,r,s,l,d,c,u,p,h,f=Math.round((new Date).getTime()/864e5),m="ms"===VEND&&Modernizr&&Modernizr.opacity===!1,g={},v=null,w=null,b=0,y=null,T=null,k="index"===e("body").attr("id"),x="page"===e("body").attr("id"),S=k&&!t.linkSlides,I=[],M=!1,O=!1,C=null,D=null,F=e(window).width(),E=e(window).height(),L=function(){clearTimeout(D),D=setTimeout(function(){if(!e(".jp-video-full").length){var t=e(window).width(),n=e(window).height();(t!==F||n!==E)&&(wt(),F=t,E=n)}},100)},N=-1,P=-1,_=function(r){if(r){var s=e("<div>",{"class":n.startShow}).appendTo(r),l=e("<div>",{"class":n.startTxt,width:"auto",text:o.startSlideshow}).appendTo("body"),d=s.width(),c=l.outerWidth();s.append(l),c>d&&l.on({mouseenter:function(){s.stop(!0,!1).animate({width:c},500)},mouseleave:function(){s.stop(!0,!1).animate({width:d},500)}}),s.on({click:function(o){return S?(o.preventDefault(),t.slideshowFullScreen&&e("html").fullScreen(!0),b===i.length-1?Ct(0):Ct(),i.length&&setTimeout(ot,1e3),!1):(a("slideshowOn",!0,8),window.location.href=i.filter("."+n.active).attr("href"),void 0)}})}},U=function(e){e&&e.length&&(k&&i.length&&t.showStart&&_(e),t.uplink=e.find("."+n.parent+">a").attr("href")||"")},A=function(){if(!(t.licensee||typeof _jaShowAds!==UNDEF&&!_jaShowAds||LOCAL||e.cookie("ls"))){var n=t.resPath+"/logo.png",o=e(new Image);o.load(function(){var t=e("<div>").css({background:"url("+n+") 10px top no-repeat",textAlign:"left",minHeight:"60px",paddingLeft:"90px"}).html("<h4>Turtle skin <small>"+VER+"</small></h4><p>Unlicensed</p>");e("body").addModal(t,{width:240,defaultButton:!1,autoFade:600}),e.cookie("ls",!0)}).attr("src",n)}},j=function(n){if(s&&s.is(":visible")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard())return!0;var o=n?n.keyCode:window.event.keyCode;switch(o){case 13:case 10:S?Ct():window.location.href=i.eq(b).attr("href");break;case 37:b=(b?b:i.length)-1,V();break;case 38:b&&t.cols&&(b=Math.max(0,b-t.cols)),V();break;case 39:b=(b+1)%i.length,V();break;case 40:b<i.length-1&&t.cols&&(b=Math.min(i.length-1,b+t.cols)),V();break;case 97:case 35:b=i.length-1,V();break;case 103:case 36:b=0,V();break;case 106:case 179:S&&t.slideshowFullScreen&&(O=!1,e("html").fullScreen(!0)),S&&Ct(),ot();break;default:return!0}return!1},H=function(n){if(s.is(":hidden")||document.activeElement&&("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName)||e.isFunction(t.enableKeyboard)&&!t.enableKeyboard())return!0;var o=n?n.keyCode:window.event.keyCode;switch(o){case 27:B();break;case 37:G();break;case 38:$();break;case 39:X();break;case 40:Z();break;case 97:case 35:S?Ct(i.length-1):window.location.href=t.firstPage;break;case 103:case 36:S?Ct(0):window.location.href=t.firstPage;break;case 106:case 179:y?at():(S&&t.slideshowFullScreen&&(O=!1,e("html").fullScreen(!0)),ot());break;case 107:yt();break;case 109:mt();break;default:return!0}return!1},R=function(){var e=t.level>0?window:parent;e.location.href=t.uplink||t.indexPage||"../"},B=function(){if(S||(t.curr&&e.cookie("curr:"+t.albumName+"/"+t.relPath,t.curr,t.keepPrefs),window.location.href=t.indexPage),!t.skipIndex||t.level||t.uplink){var o,a=e("[role=main]");e.fn.hideAllTooltips(),s.is(":visible")?(at(),S&&t.slideshowFullScreen&&e("html").fullScreen(!1),t.skipIndex?R():(a.length&&a.is(":hidden")&&(a.children().addBack().css({visibility:"visible",display:"block"}),r.children("."+n.cont).trigger("adjust"),setTimeout(function(){r.loadImages()},100)),t.transitions?s.fadeOut(t.speed):s.hide(),v&&(o=v.find("."+n.video+",."+n.audio)).length&&o.trigger("pause"),e("#"+n.map+">."+n.cont).trigger("adjust"),"no"!==t.hash&&e.history.load(""))):a.length&&a.is(":hidden")&&(a.children().addBack().css({visibility:"visible",display:"block"}),setTimeout(function(){r.loadImages()},100)),a.find("[role=scroll]").data("dragOn",!1)}},z=function(e){var t;return null==e?t=b:"number"==typeof e?t=Math.minMax(0,e,i.length):(t=i.index(e))<0&&h&&(t=h.index(e)),t},q=function(e){var t,o,a;for(t=0;t<i.length;t++)if(o=i.eq(t).children("img:first"),a=o.length&&(o.data(n.link)||o.data(n.src)).getFile(),a&&a===e)return t;return-1},W=function(){var e=i.eq(b).children("img:first");return e.length?(e.data(n.link)||e.data(n.src)).getFile():null},K=function(e){i.children("."+n.checkbox).toggleClass(n.active,e),s&&s.find("."+n.checkbox).toggleClass(n.active,e)},Q=function(){var t=function(t){t.preventDefault();var o=e(this).hasClass(n.active);return e(this).toggleClass(n.active,!o),e(this).parent().hasClass(n.active)&&s.find("."+n.checkbox).toggleClass(n.active,!o),!1},o=function(t){return t.preventDefault(),K(!e(this).hasClass(n.active)),!1};i.children("."+n.checkbox).on("click",t).on(document.touchMode?"dbltap":"dblclick",o)},V=function(o){var a=i.eq(b);i.filter("."+n.active).removeClass(n.active),a.addClass(n.active),t.skipIndex||typeof o!==UNDEF&&o!==!1||a.trigger("setactive"),h&&(h.filter("."+n.active).removeClass(n.active),h.eq(b).addClass(n.active).trigger("setactive")),t.mapOnIndex&&e("#"+n.map+" ."+n.cont).trigger("setactive",a.find("img:first").data(n.mapid)),b&&e.cookie("curr:"+t.albumName+"/"+t.relPath,b,t.keepPrefs)},Y=function(){e.cookie("curr:"+t.albumName+"/"+t.relPath,null)},X=function(){var o=e("."+n.main),a=e("."+n.img);if(o.length)if(o.position().left+o.outerWidth()<=a.width()-t.fitPadding)et();else{var i=Math.round(.8*a.width());o.animate({left:Math.max(o.position().left-i,a.width()-t.fitPadding-o.outerWidth())},t.scrollDuration)}},G=function(){var o=e("."+n.main),a=e("."+n.img);if(o.length)if(o.position().left>=t.fitPadding)J();else{var i=Math.round(.8*a.width());o.animate({left:Math.min(o.position().left+i,t.fitPadding)},t.scrollDuration)}},$=function(){var o=e("."+n.main),a=e("."+n.img);if(o.length&&!(o.position().top>t.fitPadding)){var i=Math.round(.8*a.width());o.animate({top:Math.min(o.position().top+i,t.fitPadding)},t.scrollDuration)}},Z=function(){var o=e("."+n.main),a=e("."+n.img);if(o.length&&!(o.position().top+o.outerHeight()<=a.height()-t.fitPadding)){var i=Math.round(.8*a.width());o.animate({top:Math.max(o.position().top-i,a.height()-t.fitPadding-o.outerHeight())},t.scrollDuration)}},J=function(){if(at(),S)b?Ct(b-1):"startover"===t.afterLast?Ct(i.length-1):"nextfolder"===t.afterLast?t.previousFoldersLast&&(window.location.href=t.previousFoldersLast):v.find("."+n.main).trigger("dragcancel");else{var o=e("."+n.controls+" ."+n.prev);o.length&&(o=o.attr("href"))!==NOLINK?window.location.href=o:v.find("."+n.main).trigger("dragcancel")}},et=function(r){var s=[];if(S){if(b<i.length-1)return r?nt():at(),Ct(b+1),void 0;if("startover"===t.afterLast||y&&t.slideshowLoop)return r?nt():at(),Ct(0),void 0;switch(Y(),v.find("."+n.main).trigger("dragcancel"),t.afterLast){case"onelevelup":t.uplink&&R();break;case"backtoindex":t.skipIndex||B();break;case"nextfolder":t.nextFoldersFirst?(null!==y&&e.cookie("slideshowDelay",t.slideshowDelay,8),window.location.href=t.nextFoldersFirst):at();break;case"ask":at(),i.length>1&&s.push({t:o.startOver,h:function(){Ct(0)}}),t.uplink&&s.push({t:t.level>0?o.upOneLevel:t.homepageLinkText||o.backToHome,h:function(){R()}}),t.skipIndex||s.push({t:o.backToIndex,h:function(){B()}}),t.nextFoldersFirst&&s.push({t:o.nextFolder,h:function(){window.location.href=t.nextFoldersFirst}}),e("body").addModal(e("<p>",{text:o.atLastPageQuestion}),s,{type:"question",uid:"dialog",title:o.atLastPage,width:500})}v.find("."+n.main).trigger("dragcancel")}else{var l=e("."+n.controls+" ."+n.next);l.length&&(l=l.attr("href"))&&l.length&&l!==NOLINK?(a("slideshowDelay",t.slideshowDelay),y&&a("slideshowOn",r,8),window.location.href=l):"ask"===t.afterLast&&(at(),v.find("."+n.main).trigger("dragcancel"),Y(),t.firstPage&&s.push({t:o.startOver,h:function(){y&&a("slideshowOn",null!=y,8),window.location.href=t.firstPage}}),t.uplink&&s.push({t:t.level>0?o.upOneLevel:t.homepageLinkText||o.backToHome,h:function(){R()}}),t.indexPage&&s.push({t:o.backToIndex,h:function(){window.location.href=t.indexPage}}),t.nextFoldersFirst&&s.push({t:o.nextFolder,h:function(){window.location.href=t.nextFoldersFirst}}),e("body").addModal(e("<p>",{text:o.atLastPageQuestion}),s,{uid:"dialog",type:"question",title:o.atLastPage,width:500}))}},tt=function(){T&&(T=clearTimeout(y),y=setTimeout(function(){et(!0)},300))},nt=function(){y&&(clearTimeout(y),y=setTimeout(function(){et(!0)},t.slideshowDelay))},ot=function(){y=clearTimeout(y);var o;g.play.hide(),g.pause.showin(),e.cookie("slideshowDelay",t.slideshowDelay,8),(o=v.find("."+n.video+",."+n.audio)).length&&(o.data("playing")||t.videoAuto)?(T=!0,o.trigger("setEndedFn",tt)):y=setTimeout(function(){et(!0)},t.slideshowDelay),t.bgAudioId&&e(t.bgAudioId).trigger("play"),st()},at=function(){if(T=!1,g.pause.hide(),g.play.showin(),e.cookie("slideshowDelay",null),y){var o;y=clearTimeout(y),st(),S?t.bgAudioId&&e(t.bgAudioId).trigger("pause"):a("slideshowOn",!1),(o=v.find("."+n.video+",."+n.audio)).length&&(o.data("playing")||t.videoAuto)&&o.trigger("setEndedFn",null)}},it=!1,rt=function(){O||it||(it=!0,c.stop(!0,!1).fadeTo(200,.8,function(){m&&c.css("filter",null)}),C=setTimeout(function(){st()},1500))},st=function(){O?C=setTimeout(function(){st()},750):(it=!1,C=clearTimeout(C),c.fadeTo(500,t.controlOutOpacity))},lt=function(o){return o.target&&("A"===o.target.nodeName||e(o.target).parents("."+n.bottom).length)?!0:(it?(it=!1,C=clearTimeout(C),c.fadeTo(500,t.controlOutOpacity)):rt(),!0)},dt=function(){t.infoOn?(g.showInfo.hide(),g.hideInfo.showin(),u.show().css({bottom:0})):(g.hideInfo.hide(),g.showInfo.showin(),u.css({bottom:-u.outerHeight()}).hide())},ct=function(){t.infoOn&&(g.hideInfo.hide(),g.showInfo.showin(),t.transitions?u.animate({bottom:-u.outerHeight()},500,function(){u.hide()}):u.css({bottom:-u.outerHeight()}).hide(),v&&t.fitFreespace&&v.centerThis({fit:t.fitImage,marginTop:gt(),marginBottom:0}),st(),a("infoOn",!1))},ut=function(){if(!t.infoOn){g.showInfo.hide(),g.hideInfo.showin(),u.is(":hidden")&&u.show().css({bottom:-u.outerHeight()});var e=function(){u.children("."+n.map).trigger("adjust")};t.transitions?u.animate({bottom:0},500,e):(u.show().css({bottom:0}),e()),v&&t.fitFreespace&&v.centerThis({fit:t.fitImage,marginTop:gt(),marginBottom:u.outerHeight()}),st(),a("infoOn",!0)}},pt=function(){t.thumbsOn?(g.showThumbs.hide(),g.hideThumbs.showin(),d.css({top:0}).removeClass("hide")):(g.hideThumbs.hide(),g.showThumbs.showin(),d.css({top:-p.outerHeight()-10}).removeClass("hide"))},ht=function(){t.thumbsOn&&(g.hideThumbs.hide(),g.showThumbs.showin(),t.transitions?d.animate({top:-p.outerHeight()-10},500):d.css({top:-p.outerHeight()-10}),v&&t.fitFreespace&&v.centerThis({fit:t.fitImage,marginTop:0,marginBottom:vt()}),st(),a("thumbsOn",!1))},ft=function(){t.thumbsOn||(g.showThumbs.hide(),g.hideThumbs.showin(),t.transitions?d.animate({top:0},500):d.css({top:0}),v&&t.fitFreespace&&v.centerThis({fit:t.fitImage,marginTop:p.outerHeight(),marginBottom:vt()}),st(),a("thumbsOn",!0))},mt=function(){var e=t.fitFreespace;t.fitFreespace=!1,t.infoOn||t.thumbsOn?(ht(),ct(),v&&e&&v.centerThis({fit:t.fitImage,marginTop:0,marginBottom:0})):(ft(),ut(),v&&e&&v.centerThis({fit:t.fitImage,marginTop:p.outerHeight()||0,marginBottom:u.outerHeight()||0})),t.fitFreespace=e},gt=function(){return t.fitFreespace&&d.position().top>=0?p.outerHeight()||0:0},vt=function(){return t.fitFreespace&&u.is(":visible")?u.outerHeight()||0:0},wt=function(){v&&v.centerThis({fit:t.fitImage,marginTop:gt(),marginBottom:vt()})},bt=function(){t.hideFitBtn||(t.fitImage?(g.resize.hide(),g.noresize.showin()):(g.noresize.hide(),g.resize.showin()))},yt=function(){t.fitImage?Tt():kt()},Tt=function(){t.hideFitBtn||(g.noresize.hide(),g.resize.showin()),e.fn.centerThis.defaults.enlarge=!t.fitShrinkonly,v.centerThis({fit:!1,marginTop:gt(),marginBottom:vt()}),st(),a("fitImage",!1)},kt=function(){t.hideFitBtn||(g.resize.hide(),g.noresize.showin()),e.fn.centerThis.defaults.enlarge=!0,v.centerThis({fit:!0,marginTop:gt(),marginBottom:vt()}),st(),a("fitImage",!0)},xt=function(e){e.trigger("destroy"),e.find("."+n.video+",."+n.audio).trigger("destroy"),e.find("."+n.share+"-"+n.icon).trigger("destroy"),e.find("."+n.map).trigger("destroy")},St=function(t){return t.preventDefault(),e(this).parents("[role=scroll]").data("dragOn")===!0?!1:(Ct(e(this)),!1)},It=function(e){e&&e.length&&(e.stop(),xt(e),e.remove())},Mt=function(n){var o;n&&n.length&&(o="number"===t.hash?(parseInt(n,10)||1)-1:q(n))>=0&&o<i.length?(Ct(o,!1),t.slideshowAuto=!1):(B(),"ms"==VEND&&setTimeout(function(){e("[role=main]").show(),e("[role=scroll]").trigger("adjust")},10))},Ot=function(n){if("number"===t.hash)e.history.load(n+1);else{var o=W();o&&e.history.load(o)}},Ct=function(a,r){if(typeof r===UNDEF&&(r=!0),"number"!=typeof a&&(a=a?z(a):b),s.is(":hidden")&&(v&&v.data("curr")!==a&&It(v),t.transitions?s.fadeIn(t.speed):s.show(),e.fn.hideAllTooltips(),p.children(":first").loadImages()),v&&v.data("curr")===a)return r!==!1&&Ot(a),void 0;var d,c,u,h=i.eq(a),f=h.attr("href"),m=h.children("img").eq(0);if(m.length){v&&(It(w),w=v,w.css({zIndex:0}),setTimeout(function(e){e.trigger("unswipe")},50,w.find("."+n.main)),document.touchMode||w.unmousewheel()),(d=s.children("."+n.img).not(v)).length&&d.stop().remove(),v=e("<div>",{id:"img"+a,"class":n.img}).css({zIndex:1,display:"none"}).data({curr:a}).appendTo(s),t.clickBesideForIndex&&(!t.skipIndex||t.level||t.uplink)&&v.on("click",function(t){return e(t.target).hasClass("img")?(t.preventDefault(),B(),!1):void 0}),l.css({opacity:0,display:"block"}).animate({opacity:1}),b=a,V(),S&&r&&Ot(b);var g=e("<div>",{"class":n.main});if(m.data(n.isother)||!f){c=Math.max(m.data(n.width)||s.width()-160,280),u=Math.max(m.data(n.height)||s.height()-120,200),g.addClass(n.other);var k=m.data(n.content);k&&(k=k.trim()).length?g.css({width:c,height:u}).append(k.match(/^https?:\/\//i)?e("<iframe>",{width:"100%",height:"100%",src:k,frameborder:0,allowfullscreen:"allowfullscreen"}):k):(g.append(e("<a>",{href:m.data(n.link),target:"_blank"})),g.append(e("<p>",{text:o.clickToOpen})),g.children("a:first").append(m.clone())),Ut(g)}else if(m.data(n.isvideo)||m.data(n.isaudio)){if(c=m.data(n.width)||s.width()-160,u=m.data(n.height)||s.height()-120,T=y,T&&(y=clearTimeout(y)),m.data(n.isvideo)){var x=s.width()-40,I=s.height()-40;if(c>x||u>I){var M=Math.min(x/c,I/u);c=Math.round(c*M),u=Math.round(u*M)}g.addClass(n.video)}else c=Math.max(240,m.data(n.width)||0),u=Math.max(180,m.data(n.height)||0),g.addClass(n.audio);g.css({width:c,height:u}).data({ow:c,oh:u}),setTimeout(function(){d=g.addPlayer({src:m.data(n.link),title:t.showVideoTitle?m.attr("alt"):"",poster:m.data(n.poster),ended:tt,resPath:t.resPath})},t.speed/3),Ut(g)}else{c=m.data(n.width),u=m.data(n.height);var O=e(new Image);g.addClass(n.image).append(O).css({width:c,height:u}).data({ow:c,oh:u}),O.attr({src:f,width:c||"auto",height:u||"auto"}),O[0].complete?(m.data("cached",!0),Ut(g)):O.on("load",function(){m.data("cached",!0),Ut(g)}).prop({src:f})}(d=h.find(".checkbox")).length&&(g.append(d=d.clone()),d.on("click",function(t){t.preventDefault();var o=e(this).hasClass(n.active);return e(this).toggleClass(n.active,!o),i.filter("."+n.active).find("."+n.checkbox).toggleClass(n.active,!o),!1})),At(m,a)}},Dt=function(e){var t=v.find("nav a."+n.regions+"-icon").eq(0);if(t.length){var o=i.eq(e).find("img:first");t.addRegions(v.find("."+n.main).eq(0),o.data(n.regions))}},Ft=function(e){e&&e.length&&(e.data(n.kill,!0),setTimeout(function(){e&&e.removeData(n.kill)},500))},Et=function(t){var o=e(t.target).parents("."+n.main);return o.data(n.kill)||o[0].dragOn||(Ft(o),et()),!1},Lt=function(t,o){t.preventDefault();var a=e(t.target).parents("."+n.img);return a.data(n.kill)||(Ft(a),o>0?J():et()),!1},Nt=function(e){t.rightClickProtect&&e.on("contextmenu",noAction),setTimeout(function(){!document.touchMode&&t.enableMouseWheel&&v.on("mousewheel",Lt),document.touchMode?(y||rt(),v[0].addEventListener(TOUCH_START,lt),e.on({click:noAction,dbltap:yt})):(i.length>1||!S)&&e.hasClass(n.image)&&(t.clickForNext?e.on("click",Et):e.on({click:noAction,dblclick:yt})),e.hasClass(n.image)&&e.addSwipe(et,J)},t.speed/2)},Pt=function(t){var o=t.attr("href"),a=t.children("img").eq(0);!o||!a||a.data("cached")||a.data(n.isvideo)||a.data(n.isother)||e("<img>").on("load",function(){a.data("cached",!0)}).attr({src:o})},_t=function(){b<i.length-1&&Pt(i.eq(b+1)),b>0&&Pt(i.eq(b-1))},Ut=function(o){if(l&&l.length&&(t.transitions?l.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){e(this).hide()}}):l.hide()),S)t.transitions?w&&w.stop(!0,!1).animate({opacity:0},t.speed/2,"linear",function(){It(w)}):It(w),v.children().not("."+n.bottom).remove(),v.append(o);else if(o=v.find("."+n.main),!o.length)return;var a=o.hasClass(n.image);Nt(o),setTimeout(function(){t.transitions?v.css({opacity:0,display:"block"}).animate({opacity:1},{duration:t.speed,complete:m?function(){v.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(.75*t.speed),marginTop:gt(),marginBottom:vt(),preScale:a&&t.preScale,animate:a&&t.preScale&&1!==t.preScale,fit:t.fitImage}):v.show().centerThis({init:!0,marginTop:gt(),marginBottom:vt(),fit:t.fitImage}),Dt(b)},50),S?_t():t.slideshowOn&&ot()},At=function(r,s){var l,d,c,p,f,m=Math.round(.8*v.width())-30,g=!(r.data(n.isvideo)||r.data(n.isaudio)||r.data(n.isother));S?(u=e("<div>",{"class":n.bottom}).appendTo(v),l=e("<div>",{"class":n.cont}).appendTo(u),typeof s!==UNDEF&&t.showImageNumbers&&l.append('<h4 class="nr"><strong>'+(s+1)+"</strong> / "+i.length+"</h4>"),(c=r.data(n.caption))&&l.append(c),f=r.data(n.src).replace(t.thumbs+"/",t.slides+"/")):(l=u.children("."+n.cont),f=r.attr("src")),d=e("<nav>",{"class":"buttons"}).prependTo(l),l.width()>m&&l.width(m);var w=function(o){o.preventDefault();var i=e(o.target),r=i.data("rel"),s=l.children("."+r),d=s.is(":visible"),c=vt(),u=s.outerHeight(!0);if(i.toggleClass(n.active,!d),r===n.map){var p=function(){d||s.children("."+n.mapcont).trigger("adjust")};t.transitions?s.slideToggle("fast",p):(s.toggle(),setTimeout(p,50))}else t.transitions?s.slideToggle("fast"):s.toggle();return v&&t.fitFreespace&&v.centerThis({fit:t.fitImage,marginTop:gt(),marginBottom:c+(d?-u:u)}),a(r+"On",!d),!1},y=function(t,o){var a=e("<div>",{"class":n.panel+" "+t}).data("rel",t);if(o){var i=l.find("."+n.panel).eq(0);a=i.length?a.insertBefore(i):a.appendTo(l)}else a=a.appendTo(l);return a.append(e("<div>",{"class":n.icon})),a},T=function(a){var i=e("<a>",{"class":a+"-"+n.icon}).data("rel",a).appendTo(d);return t.buttonLabels&&i.text(o[a+"Btn"]||a),document.touchMode||i.addTooltip(o[a+"Label"]||(t.buttonLabels?"":o[a+"Btn"]||a)),i.on("click",w),i};if(t.shareSlides){var k;t.shareInline?(k=y(n.share,!0),T(n.share),k=e("<div>",{"class":n.shares}).css("min-height","25px").appendTo(k)):(k=e("<a>",{"class":n.share+"-"+n.icon}).appendTo(d),t.buttonLabels&&k.text(o.shareBtn)),S?(p="number"===t.hash?b+1:W(),setTimeout(function(){k.addSocial({hash:p,inline:t.shareInline,buttonLabels:t.shareLabels,title:(r.data(n.caption)||"").stripHTML(),image:f})},t.speed/2)):k.addSocial({useHash:!1,inline:t.shareInline,buttonLabels:t.shareLabels,title:(r.data(n.caption)||"").stripHTML(),image:f})}var x;!S&&(x=l.children("."+n.comments)).length&&(x.data("rel",n.comments),T(n.comments));for(var M,O=[n.meta,n.map,n.shop,n.print],C=0;C<O.length;C++)M=O[C],null==r.data(M)||M==n.map&&!t.mapOnSlide||(y(M),T(M));if(g){if(t.fotomotoOn){var D=e("<a>",{"class":n.fotomoto+"-"+n.icon,text:t.buttonLabels?o.fotomotoBtn:""});D.addTooltip(LOCAL?o.locationWarning:"<h5>Fotomoto</h5>"+o.fotomotoLabel),setTimeout(function(){D.on("click",function(e){return e.preventDefault(),typeof FOTOMOTO===UNDEF||LOCAL||FOTOMOTO.API.showWindow(10,r.data(n.link)||f),!1})},t.speed),d.append(D)}if(c=r.data(n.mostphotos)){c.startsWith("http")||(c="http://www.mostphotos.com/"+c);var F=e("<a>",{href:c,"class":n.mostphotos+"-"+n.icon,text:t.buttonLabels?o.mostphotosBtn:"",target:"_blank"}).appendTo(d);F.addTooltip("<h5>"+o.mostphotosBtn+"</h5>"+o.mostphotosLabel)}if(r.data(n.regions)){var E=e("<a>",{"class":n.regions+"-"+n.icon});t.buttonLabels&&E.text(o.people),t[n.regions+"On"]&&E.addClass(n.active),E.on("click",function(){a(n.regions+"On",!e(this).hasClass(n.active))}),d.append(E)}}c=r.data(n.link);var L=g&&t.hasOwnProperty("extraSizes")&&f.hasExt("jpg,png,jpeg");if(L||c&&(!g&&t.downloadNonImages||g&&!t.rightClickProtect)){var N=f.getFile(),P=e("<div>"),_=e("<a>",{href:c,"class":n.link+"-"+n.icon,download:"",target:"_blank"});t.buttonLabels&&(t.hasOwnProperty("extraSizes")?_.text(o.download):r.data(n.isoriginal)?_.text(o.original):_.text(o.hiRes)),P.append(e("<h5>",{text:o.download}));var U=e("<div>",{"class":"sizes"}).appendTo(P);if(L)for(var A=t.extraSizes.split(","),C=0;C<A.length;C++)U.append(e("<a>",{href:(S?"":"../")+"dl/"+A[C]+"/"+N,text:A[C],download:""}));c&&(U.append(e("<a>",{href:c,text:r.data(n.isoriginal)?o.original:o.hiRes})),P.append(e("<input>",{"class":"fullw",type:"text",value:c.fullUrl(),readonly:""})),"download"in _[0]||P.append(e("<small>",{html:o.saveTip}))),_.addTooltip(P,{stay:5e3}),d.append(_)}if(t.imgHook){var j=e("<a>",{"class":n.custom+"-"+n.icon});t.buttonLabels&&t.imgHookBtn&&j.text(t.imgHookBtn),j.on("click",function(o){o.preventDefault();var a=r.data(n.link)||(S?r.data(n.src):r.attr("src")).replace(t.thumbs+"/","");return e("body").addModal(e(t.imgHook.replace(/\%fileName\%/g,a)),{uid:n.custom,width:t.imgHookWidth||600,title:t.imgHookBtn,defaultButton:"okButton",resizable:!0,savePosition:!0}),!1}),d.append(j)}t.imgHookFn&&e.isFunction(t.imgHookFn)&&t.imgHookFn.call(r),l.children("."+n.panel).each(function(){var o=e(this),a=o.data("rel");if(a&&null!==(c=r.data(a))){if(a===n.map){var i=e("<div>",{"class":n.mapcont}).appendTo(o);if(i.width(l.width()-30),t.mapAll){var s=function(){S?Ct(this.link):window.location.href=this.link};i.addMap({click:s,markers:I,curr:parseInt(S?r.data(n.mapid):h.filter("."+n.active).find("img:first").data(n.mapid),10)})}else{var u=(r.data(n.caption)||"").stripHTML()||r.attr("alt")||b+1+"";i.addMap({map:c,label:u})}setTimeout(function(){i.trigger("adjust")},t.speed)}else if(a===n.shop){var p={};"+"!==c&&(p.options=c),null!==(c=r.data(n.discount))&&(p.discount=c),o.addShop(r.closest("a"),p)}else o.append(c);t[a+"On"]?d.children("a."+a+"-icon").addClass(n.active):o.hide()}}),d.html().length||d.remove(),t.infoOn||u.hide()},jt=function(){var a=e("<div>",{"class":n.feedback}),r=window.location.href.getDir(),s=e("<form>",{id:n.feedback}).appendTo(a);t.directKey&&(s.append('<input type="hidden" name="from" value="'+t.feedbackEmail.replace("|","@")+'">'),s.append('<input type="hidden" name="to" value="'+xDecrypt(t.directKey)+'">'),s.append(e('<p class="email"><label for="email">'+o.yourEmail+"</label>"+'<input id="email" name="email" type="email"></p>'))),s.append(e('<p class="subject"><label for="subject">'+o.subject+"</label>"+'<input id="subject" name="subject" value="'+t.albumName+(t.relPath.length?"/"+t.relPath:"")+'"></p>')),s.append(e('<p class="message"><label for="message">'+o.message+"</label>"+'<textarea id="message" name="message"></textarea></p>')),i.filter(function(){return e(this).children("."+n.active).length}).each(function(t){var a=e(this).find("img").eq(0),i=a.data("src"),l=(a.data(n.isimage)||a.data(n.isother)?i:a.data("link")||"").getFile();s.append(e('<div><aside><img src="'+i+'"></aside><div><a class="remove">&times;</a><label for="img'+t+'">'+l+"</label>"+'<input type="hidden" name="file['+(t+1)+']" value="'+r+"#"+encodeURIComponent(l)+'">'+'<textarea id="img'+t+'" name="comment['+(t+1)+']" placeholder="'+o.comment+'"></textarea></div></div>'))}),s.find("a.remove").on("click",function(t){return t.preventDefault(),e(this).parents("div").eq(1).remove(),!1});var l=function(n){if(!n||!n.length)return console&&console.log("Submitform Error: Missing form"),!1;var a,i=!1,r=n.find("form").eq(0),s=window.location.href.split("#")[0];if(t.directKey){if(a=r.find("input#email").val(),!a.length||!a.match(/^\S+@\S+[\.][0-9a-z]+$/))return e("body").addModal(e("<div>",{html:o.emailMissing}),{type:"error"}),!1;var l=function(t){"Ok"===t.Result?e("body").addModal(e("<div>",{html:o.messageSent}),{autoFade:1500}):(i=!0,DEBUG&&console&&console.log("Error sending mail: Result="+t.Result+" Cause="+t.Cause),e("body").addModal(e("<div>",{html:"<h3>"+o.errorSending+'</h3><p class="err">'+t.Result+", "+t.Cause+"</p>"}),{type:"error"}))};if(e.ajax({url:"http://jalbum.net/integration/api/sendmail.json",dataType:"jsonp",data:r.serialize(),success:function(e){l(e)}}),i)return!1
}else if(t.php)e.ajax({url:resPath+"feddback.php",type:"POST",data:{message:r.serialize(),subject:"Subject of your e-mail"},success:function(e){alert("You data has been successfully e-mailed"),alert("Your server-side script said: "+e)}});else{var d="mailto:"+encodeURIComponent(t.feedbackEmail.replace("|","@"));if(d+="?subject="+encodeURIComponent(r.find("input#subject").val()),d+="&body=",(a=r.find("textarea#message").val())&&(d+=encodeURIComponent(a+"\n\n")),r.children("div").each(function(t){d+=encodeURIComponent(t+1+". "+s+"#"+encodeURIComponent(e(this).find("label").eq(0).text())+"\n"),(a=e(this).find("textarea").val())&&(d+=encodeURIComponent(a+"\n")),d+=encodeURIComponent("\n")}),d.length>2048)return e("body").addModal(e("<div>",{html:"<p>"+o.tooLong+"</p>"}),{type:"error"}),!1;window.location.href=d}return!0};return s.on("submit",function(){return l(e("#feedback"))}),e("body").addModal(a,[{t:o.send,h:l}],{uid:"feedback",enableKeyboard:!1,title:o.sendFeedback,width:480,resizable:!0,savePosition:!0}),!1},Ht=function(){var t=!1,a=i.filter(function(){var o,a=e(this);return a.children("."+n.checkbox).hasClass(n.active)?(a=a.children("img:first"),o=a.data(n.shop),t=!0,!(o&&"+"!==o||a.data(n.discount))):!1});if(0===a.length)return e("body").addModal(e("<h3>"+o.noItemsSelected+"</h3><p>"+(t?o.nonShoppableItems:o.selectItemsHint)+"</p>"),{type:"warning"}),void 0;var r=e("<div>",{"class":n.shopAll});window.location.href.getDir();var s=e("<ul>",{"class":n.thumbs}).appendTo(r);a.each(function(){s.append(e("<li>").append(e("<img>",{src:e(this).children("img:first").data("src")})))});var l=e("<div>",{"class":n.shop}).appendTo(r);l.addShop(a),e("body").addModal(r,{uid:n.shopAll+"w",title:o.buyNItems.replace("{0}",a.length),width:640,resizable:!0,savePosition:!0,enableKeyboard:!1,blocking:!0,defaultButton:"close"})},Rt=function(){c=e("<nav>",{"class":n.controls+" clearfix"}).appendTo(d),g.prev=e("<a>",{"class":n.prev,title:o.previousPicture}).appendTo(c),(!t.skipIndex||t.level||t.uplink)&&(g.up=e("<a>",{"class":n.up,title:t.skipIndex?o.upOneLevel:o.backToIndex}).appendTo(c)),g.noresize=e("<a>",{"class":n.noresize,title:o.oneToOneSize}).appendTo(c),g.resize=e("<a>",{"class":n.resize,title:o.fitToScreen}).appendTo(c),t.hideFitBtn?g.resize.add(g.noresize).hide():(g.resize.togglein(!t.fitImage),g.noresize.togglein(t.fitImage)),g.hideThumbs=e("<a>",{"class":n.hideThumbs,title:o.hideThumbs}).appendTo(c),g.showThumbs=e("<a>",{"class":n.showThumbs,title:o.showThumbs}).appendTo(c),g.showThumbs.togglein(!t.thumbsOn),g.hideThumbs.togglein(t.thumbsOn),g.hideInfo=e("<a>",{"class":n.hideInfo,title:o.hideInfo}).appendTo(c),g.showInfo=e("<a>",{"class":n.showInfo,title:o.showInfo}).appendTo(c),g.showInfo.togglein(!t.infoOn),g.hideInfo.togglein(t.infoOn),g.play=e("<a>",{"class":n.play,title:o.startAutoplay}).appendTo(c),g.pause=e("<a>",{"class":n.pause,title:o.stopAutoplay}).appendTo(c),i.length>1||"nextfolder"===t.afterLast?(g.play.togglein(!t.slideshowAuto),g.pause.togglein(t.slideshowAuto)):g.play.add(g.pause).hide(),g.next=e("<a>",{"class":n.next,title:o.nextPicture}).appendTo(c)},Bt=function(){var n=0;c.children().each(function(){"none"!==e(this).css("display")&&(n+=e(this).outerWidth())}),c.css({marginLeft:-Math.floor(n/2)}),document.touchMode||c.children("a").not(g.play).addTooltip({delay:500});var o=e("<div>",{"class":"slideshowdelay",text:g.play.prop("title")}),i=e("<form>").appendTo(o);i.on("submit",function(e){return e.preventDefault(),ot(),!1}).append(e("<input>",{type:"text",value:t.slideshowDelay/1e3}).focus().on("change",function(){return a("slideshowDelay",Math.round(parseFloat(1e3*e(this).val())||e.fn.turtle.defaults.slideshowDelay)),!0})).append(e("<a>",{"class":"button",href:NOLINK,text:" "}).on("click",$t)),i.find("input"),g.play.prop("title","").addTooltip(o,{stay:5e3}),document.touchMode||(S?c.hide():C=setTimeout(function(){st()},1500)),c.on({mouseenter:function(){O=!0,e(this).stop(!0,!1).fadeTo(200,1)},mouseleave:function(){O=!1,e(this).stop(!0,!1).fadeTo(200,.8)}}),document.touchMode||s.on("mousemove",function(e){!M&&(N-e.clientY||P-e.clientX)&&(P>=0&&rt(),P=e.clientX,N=e.clientY)})},zt=function(e){return e.preventDefault(),at(),J(),!1},qt=function(e){return e.preventDefault(),at(),B(),!1},Wt=function(){return t.curr&&e.cookie("curr:"+t.albumName+"/"+t.relPath,t.curr,600),!0},Kt=function(e){return e.preventDefault(),Tt(),!1},Qt=function(e){return e.preventDefault(),kt(),!1},Vt=function(e){return e.preventDefault(),ct(),!1},Yt=function(e){return e.preventDefault(),ut(),!1},Xt=function(e){return e.preventDefault(),ht(),!1},Gt=function(e){return e.preventDefault(),ft(),!1},$t=function(n){return n.preventDefault(),S&&t.slideshowFullScreen&&(O=!1,e("html").fullScreen(!0)),ot(),!1},Zt=function(e){return e.preventDefault(),at(),!1},Jt=function(e){return e.preventDefault(),nt(),et(),!1},en=function(){Rt(),g.prev.on("click",zt),g.up&&g.up.on("click",qt),g.noresize.on("click",Kt),g.resize.on("click",Qt),g.hideInfo.on("click",Vt),g.showInfo.on("click",Yt),g.hideThumbs.on("click",Xt),g.showThumbs.on("click",Gt),g.play.on("click",$t),g.pause.on("click",Zt),g.next.on("click",Jt),Bt()},tn=function(){g.prev=c.children("."+n.prev),g.up=c.children("."+n.up),g.noresize=c.children("."+n.noresize),g.resize=c.children("."+n.resize),g.hideInfo=c.children("."+n.hideInfo),g.showInfo=c.children("."+n.showInfo),g.hideThumbs=c.children("."+n.hideThumbs),g.showThumbs=c.children("."+n.showThumbs),g.play=c.children("."+n.play),g.pause=c.children("."+n.pause),g.next=c.children("."+n.next),p.find("."+n.cont+" a").length>1?(g.play.togglein(!t.slideshowAuto),g.pause.togglein(t.slideshowAuto)):g.play.add(g.pause).hide(),t.hideFitBtn&&g.resize.add(g.noresize).hide(),g.up&&g.up.on("click",Wt),g.noresize.on("click",Kt),g.resize.on("click",Qt),g.hideInfo.on("click",Vt),g.showInfo.on("click",Yt),g.hideThumbs.on("click",Xt),g.showThumbs.on("click",Gt),g.play.on("click",$t),g.pause.on("click",Zt),g.next.on("click",Jt),Bt()},nn=function(){var a,s,l=function(){var n=i.index(e(this));n&&e.cookie("curr:"+t.albumName+"/"+t.relPath,n,t.keepPrefs)};i.each(function(){a=e(this),s=a.find("img").eq(0),s.length&&(t.rightClickProtect&&a.on("contextmenu",noAction),s.attr("src").endsWith("/"+t.loadImg)&&s.addClass(n.toload),t.markNewDays&&f-parseInt(s.data(n.modified)||0,10)<=t.markNewDays&&a.append(e("<span>",{"class":n.newItem,text:o.newItem})),document.touchMode||a.addTooltip({delay:500}),S||i.on("click",l))}),setTimeout(function(){r.loadImages(),setTimeout(function(){r.loadImages()},1200)},100);var d=function(){return r.loadImages(),!0};document.touchMode&&(r[0].addEventListener("scroll",d),r[0].addEventListener(TOUCH_END,d)),Q(),e("#"+n.selectAll).on("click",function(e){return e.preventDefault(),K(!0),!1}),e("#"+n.selectNone).on("click",function(e){return e.preventDefault(),K(!1),!1}),e("#"+n.shopAll).on("click",Ht)},on=function(){r.find("."+n.folders).on("click",function(){return e.cookie("curr:"+t.albumName+"/"+t.relPath,null),!0})},an=function(){var o,a,r,s,l,c,u,f,m,g,v=0;p=e("<div>",{"class":n.scrollbox}).appendTo(d),l=e("<div>",{"class":"wrap"}).appendTo(p),l=e("<ul>",{"class":n.cont+" "+n.load}).appendTo(l),i.each(function(){o=e(this),s=o.find("img").eq(0),s.length&&(a=e("<a>",{href:NOLINK}).appendTo(e("<li>").appendTo(l)),c||(isNaN(c=parseInt(a.css("width"),10))&&(c=133),isNaN(u=parseInt(a.css("height"),10))&&(u=100)),f=s.attr("width"),m=s.attr("height"),(f>c||m>u)&&(f/c>m/u?(m=Math.round(m*c/f),f=c):(f=Math.round(f*u/m),m=u)),r=e("<img>",{src:s.attr("src"),"class":s.attr("class")}).data({src:s.data("src")}).appendTo(a),f&&m&&r.attr({width:f,height:m}),g=o.children("."+n.newItem),g.length&&a.append(g.clone()),document.touchMode||a.addTooltip(o.data("hint")||o.siblings("."+n.caption).html(),{delay:500}))}),a=l.children("li").first(),a.length&&(isNaN(v=parseInt(a.css("width"),10))?v=135:v+=(parseInt(a.css("marginLeft"),10)||0)+(parseInt(a.css("marginRight"),10)||0),l.width(v*l.children().length+2)),l.scrollThumbs({enableMouseWheel:t.enableMouseWheel}),h=p.find("li > a"),h.on("click",function(){return e(this).parents("[role=scroll]").data("dragOn")===!0?!1:(e(this).hasClass(n.active)||(at(),Ct(h.index(e(this)))),V(),!1)})},rn=function(){var o=p.find("."+n.cont),a=0;document.touchMode||h.addTooltip({delay:500}).each(function(){a+=e(this).outerWidth()}),a+=2*h.length,o.width(a),o.scrollThumbs({enableMouseWheel:t.enableMouseWheel}),h.on("click",function(){return!e(this).parents("[role=scroll]").data("dragOn")}),o.trigger("setactive"),t.thumbsOn||d.css("top",-p.outerHeight()-10)},sn=function(){U(e(t.header)),r=e("."+n.items),i.length&&nn(),on(),e("#"+n.feedback).on("click",jt),i.length&&((t.mapOnIndex||t.mapAll&&t.mapOnSlide)&&(I=i.collectMarkers({dynamic:S})),t.mapOnIndex&&I.length&&e("#"+n.map+" ."+n.cont).addMap({click:function(){S?Ct(this.link):window.location.href=this.link},markers:I,range:999,curr:0}),null===(b=e.cookie("curr:"+t.albumName+"/"+t.relPath))||b>=i.length?(b=0,V(!0)):setTimeout(function(){V()},300),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&e(window).on("keydown",j))},ln=function(){i.on("click",St),s=e("<div>",{"class":n.gallery}).attr("role","gallery").appendTo("body"),l=e("<div>",{"class":n.wait}).appendTo(s),d=e("<div>",{"class":n.navigation}).appendTo(s),an(),en(),t.thumbsOn||d.css("top",-p.outerHeight()-10),p.on({mouseenter:function(){st(),M=!0},mouseleave:function(){M=!1}}),"page"!==e("body").attr("id")&&t.hash&&"no"!==t.hash&&e.history.init(Mt);var o=e.cookie("slideshowDelay");t.slideshowAuto||o&&e.isNumeric(o)?(S&&t.slideshowFullScreen&&e("html").fullScreen(!0),o&&e.isNumeric(o)&&(t.slideshowDelay=o),Ct(b),ot()):(at(),t.skipIndex&&Ct(b)),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&e(window).on("keydown",H)},dn=function(){s=e("."+n.gallery),d=e("."+n.navigation),c=e("."+n.controls),v=e("."+n.img),u=e("."+n.bottom),i=v.children("."+n.main),b=0,p=e("."+n.scrollbox),h=p.find("li > a");var o=i.find("img:first");t.mapAll&&(I=h.collectMarkers()),rn(),tn(),pt(),dt(),bt(),o.length&&(i.hasClass(n.image)&&!o[0].complete?(o.on("load",function(){o.data("cached",!0),Ut()}).attr({src:o.attr("src")}),l=e("<div>",{"class":n.wait}).appendTo(s),l.fadeIn()):(o.data("cached",!0),Ut()),At(o)),(e.isFunction(t.enableKeyboard)||t.enableKeyboard)&&e(window).on("keydown",H)};return k?(setTimeout(A,1e3),i=e(this).find("td > a"),sn(),i.length&&S&&ln()):(i=e(this),dn()),(i.length&&S||!x)&&(e(window).on("resize",L),document.touchMode&&e(window).on("orientationchange",L)),this},e.fn.turtle.defaults={header:"#main header",slides:"slides",thumbs:"thumbs",linkSlides:!1,loadImg:"blank.png",hash:"fileName",resPath:"res/",relPath:"",level:0,skipIndex:!1,showStart:!0,keepPrefs:600,speed:600,controlbarOpacity:0,controlOutOpacity:0,transitions:!0,preScale:.95,slideshowDelay:4e3,slideshowLoop:!1,slideshowAuto:!1,slideshowFullScreen:!1,markNewDays:0,afterLast:"ask",thumbsOn:!1,fitImage:!1,fitShrinkonly:!1,fitFreespace:!0,hideFitBtn:!1,fitPadding:15,borderWidth:10,clickForNext:!0,clickBesideForIndex:!1,rightClickProtect:!1,showImageNumbers:!0,buttonLabels:!1,infoOn:!0,metaOn:!1,mapOn:!1,mapOnIndex:!1,mapOnSlide:!1,mapType:"roadmap",mapZoom:18,mapAll:!1,shopOn:!0,shopGateway:"paypal",shopCurrency:"USD",shareOn:!1,commentOn:!1,printOn:!1,regionsOn:!1,downloadNonImages:!1,enableKeyboard:!0,enableMouseWheel:!0,videoAuto:!1,videoMaximize:!1,videoTitleOn:!1,prioritizeFlash:!1,scrollDuration:1e3},e.fn.turtle.ids={gallery:"gallery",items:"items",folders:"folders",thumbs:"thumbs",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",image:"image",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",shopAll:"shopall",discount:"discount",fotomoto:"fotomoto",mostphotos:"mostphotos",share:"share",shares:"shares",print:"print",comments:"comments",link:"link",custom:"custom",poster:"poster",isoriginal:"isoriginal",content:"content",width:"width",height:"height",src:"src",ext:"ext",thumbExt:"thumbext",regions:"regions",isimage:"isimage",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",modified:"modified",startShow:"startshow",startBtn:"startbtn",startTxt:"starttxt",controls:"controls",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",newItem:"newlabel",showHint:"showhint",kill:"kill",load:"load",toload:"toload",feedback:"feedback",checkbox:"checkbox",selectAll:"selectall",selectNone:"selectnone"},e.fn.turtle.text={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",previousPicture:"Previous picture",nextPicture:"Next picture",previousFolder:"Previous folder",nextFolder:"Next folder",changeSpeed:"Change speed",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",newItem:"NEW",clickToOpen:"Click to open this document with the associated viewer",commentsBtn:"Comments",commentsLabel:"Add a comment, view other's comments",metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",fotomotoBtn:"Buy / Share",fotomotoLabel:"Buy prints or digital files, send free eCard through Fotomoto",mostphotosBtn:"Purchase",mostphotosLabel:"Download this image from <b>mostphotos.com</b>!",people:"People",sendFeedback:"Send feedback",message:"Message",subject:"Subject",comment:"Comment",yourEmail:"Your email address",send:"Send",messageSent:"Message sent",errorSending:"Error sending email!",tooLong:"Text is too long or too many items!",emailMissing:"Email is misssing or wrong!",noItemsSelected:"No items selected!",selectItemsHint:"Select the desired items first!",nonShoppableItems:"The selected items have no or have proprietary shopping options, or different discount rates.",buyNItems:"Buy {0} items",locationWarning:"Works only when uploaded"}}(jQuery);